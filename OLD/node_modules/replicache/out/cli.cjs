#!/usr/bin/env node
var zd=Object.create;var hs=Object.defineProperty;var Hd=Object.getOwnPropertyDescriptor;var Vd=Object.getOwnPropertyNames;var Yd=Object.getPrototypeOf,Gd=Object.prototype.hasOwnProperty;var rr=(i,e)=>()=>(i&&(e=i(i=0)),e);var w=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),Qd=(i,e)=>{for(var r in e)hs(i,r,{get:e[r],enumerable:!0})},Kd=(i,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Vd(e))!Gd.call(i,a)&&a!==r&&hs(i,a,{get:()=>e[a],enumerable:!(n=Hd(e,a))||n.enumerable});return i};var Ie=(i,e,r)=>(r=i!=null?zd(Yd(i)):{},Kd(e||!i||!i.__esModule?hs(r,"default",{value:i,enumerable:!0}):r,i));var Xo=(i,e,r)=>{if(!e.has(i))throw TypeError("Cannot "+r)};var B=(i,e,r)=>(Xo(i,e,"read from private field"),r?r.call(i):e.get(i)),ne=(i,e,r)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,r)},K=(i,e,r,n)=>(Xo(i,e,"write to private field"),n?n.call(i,r):e.set(i,r),r);var j=w((Mb,na)=>{"use strict";var{FORCE_COLOR:nf,NODE_DISABLE_COLORS:of,TERM:af}=process.env,k={enabled:!of&&af!=="dumb"&&nf!=="0",reset:F(0,0),bold:F(1,22),dim:F(2,22),italic:F(3,23),underline:F(4,24),inverse:F(7,27),hidden:F(8,28),strikethrough:F(9,29),black:F(30,39),red:F(31,39),green:F(32,39),yellow:F(33,39),blue:F(34,39),magenta:F(35,39),cyan:F(36,39),white:F(37,39),gray:F(90,39),grey:F(90,39),bgBlack:F(40,49),bgRed:F(41,49),bgGreen:F(42,49),bgYellow:F(43,49),bgBlue:F(44,49),bgMagenta:F(45,49),bgCyan:F(46,49),bgWhite:F(47,49)};function sa(i,e){let r=0,n,a="",u="";for(;r<i.length;r++)n=i[r],a+=n.open,u+=n.close,e.includes(n.close)&&(e=e.replace(n.rgx,n.close+n.open));return a+e+u}function uf(i,e){let r={has:i,keys:e};return r.reset=k.reset.bind(r),r.bold=k.bold.bind(r),r.dim=k.dim.bind(r),r.italic=k.italic.bind(r),r.underline=k.underline.bind(r),r.inverse=k.inverse.bind(r),r.hidden=k.hidden.bind(r),r.strikethrough=k.strikethrough.bind(r),r.black=k.black.bind(r),r.red=k.red.bind(r),r.green=k.green.bind(r),r.yellow=k.yellow.bind(r),r.blue=k.blue.bind(r),r.magenta=k.magenta.bind(r),r.cyan=k.cyan.bind(r),r.white=k.white.bind(r),r.gray=k.gray.bind(r),r.grey=k.grey.bind(r),r.bgBlack=k.bgBlack.bind(r),r.bgRed=k.bgRed.bind(r),r.bgGreen=k.bgGreen.bind(r),r.bgYellow=k.bgYellow.bind(r),r.bgBlue=k.bgBlue.bind(r),r.bgMagenta=k.bgMagenta.bind(r),r.bgCyan=k.bgCyan.bind(r),r.bgWhite=k.bgWhite.bind(r),r}function F(i,e){let r={open:`\x1B[${i}m`,close:`\x1B[${e}m`,rgx:new RegExp(`\\x1b\\[${e}m`,"g")};return function(n){return this!==void 0&&this.has!==void 0?(this.has.includes(i)||(this.has.push(i),this.keys.push(r)),n===void 0?this:k.enabled?sa(this.keys,n+""):n+""):n===void 0?uf([i],[r]):k.enabled?sa([r],n+""):n+""}}na.exports=k});var aa=w((Lb,oa)=>{"use strict";oa.exports=(i,e)=>{if(!(i.meta&&i.name!=="escape")){if(i.ctrl){if(i.name==="a")return"first";if(i.name==="c"||i.name==="d")return"abort";if(i.name==="e")return"last";if(i.name==="g")return"reset"}if(e){if(i.name==="j")return"down";if(i.name==="k")return"up"}return i.name==="return"||i.name==="enter"?"submit":i.name==="backspace"?"delete":i.name==="delete"?"deleteForward":i.name==="abort"?"abort":i.name==="escape"?"exit":i.name==="tab"?"next":i.name==="pagedown"?"nextPage":i.name==="pageup"?"prevPage":i.name==="home"?"home":i.name==="end"?"end":i.name==="up"?"up":i.name==="down"?"down":i.name==="right"?"right":i.name==="left"?"left":!1}}});var ii=w(($b,ua)=>{"use strict";ua.exports=i=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(e,"g");return typeof i=="string"?i.replace(r,""):i}});var N=w((kb,la)=>{"use strict";var bs="\x1B",U=`${bs}[`,lf="\x07",ys={to(i,e){return e?`${U}${e+1};${i+1}H`:`${U}${i+1}G`},move(i,e){let r="";return i<0?r+=`${U}${-i}D`:i>0&&(r+=`${U}${i}C`),e<0?r+=`${U}${-e}A`:e>0&&(r+=`${U}${e}B`),r},up:(i=1)=>`${U}${i}A`,down:(i=1)=>`${U}${i}B`,forward:(i=1)=>`${U}${i}C`,backward:(i=1)=>`${U}${i}D`,nextLine:(i=1)=>`${U}E`.repeat(i),prevLine:(i=1)=>`${U}F`.repeat(i),left:`${U}G`,hide:`${U}?25l`,show:`${U}?25h`,save:`${bs}7`,restore:`${bs}8`},hf={up:(i=1)=>`${U}S`.repeat(i),down:(i=1)=>`${U}T`.repeat(i)},cf={screen:`${U}2J`,up:(i=1)=>`${U}1J`.repeat(i),down:(i=1)=>`${U}J`.repeat(i),line:`${U}2K`,lineEnd:`${U}K`,lineStart:`${U}1K`,lines(i){let e="";for(let r=0;r<i;r++)e+=this.line+(r<i-1?ys.up():"");return i&&(e+=ys.left),e}};la.exports={cursor:ys,scroll:hf,erase:cf,beep:lf}});var pa=w((Bb,fa)=>{"use strict";function df(i,e){var r=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!r){if(Array.isArray(i)||(r=ff(i))||e&&i&&typeof i.length=="number"){r&&(i=r);var n=0,a=function(){};return{s:a,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(p){throw p},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,d;return{s:function(){r=r.call(i)},n:function(){var p=r.next();return u=p.done,p},e:function(p){l=!0,d=p},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(l)throw d}}}}function ff(i,e){if(!!i){if(typeof i=="string")return ha(i,e);var r=Object.prototype.toString.call(i).slice(8,-1);if(r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set")return Array.from(i);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ha(i,e)}}function ha(i,e){(e==null||e>i.length)&&(e=i.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=i[r];return n}var pf=ii(),da=N(),ca=da.erase,mf=da.cursor,gf=i=>[...pf(i)].length;fa.exports=function(i,e){if(!e)return ca.line+mf.to(0);let r=0,n=i.split(/\r?\n/);var a=df(n),u;try{for(a.s();!(u=a.n()).done;){let l=u.value;r+=1+Math.floor(Math.max(gf(l)-1,0)/e)}}catch(l){a.e(l)}finally{a.f()}return ca.lines(r)}});var ws=w((_b,ma)=>{"use strict";var sr={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},bf={arrowUp:sr.arrowUp,arrowDown:sr.arrowDown,arrowLeft:sr.arrowLeft,arrowRight:sr.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},yf=process.platform==="win32"?bf:sr;ma.exports=yf});var ba=w((Fb,ga)=>{"use strict";var Dt=j(),ht=ws(),Ss=Object.freeze({password:{scale:1,render:i=>"*".repeat(i.length)},emoji:{scale:2,render:i=>"\u{1F603}".repeat(i.length)},invisible:{scale:0,render:i=>""},default:{scale:1,render:i=>`${i}`}}),wf=i=>Ss[i]||Ss.default,nr=Object.freeze({aborted:Dt.red(ht.cross),done:Dt.green(ht.tick),exited:Dt.yellow(ht.cross),default:Dt.cyan("?")}),Sf=(i,e,r)=>e?nr.aborted:r?nr.exited:i?nr.done:nr.default,vf=i=>Dt.gray(i?ht.ellipsis:ht.pointerSmall),Tf=(i,e)=>Dt.gray(i?e?ht.pointerSmall:"+":ht.line);ga.exports={styles:Ss,render:wf,symbols:nr,symbol:Sf,delimiter:vf,item:Tf}});var wa=w((Wb,ya)=>{"use strict";var Rf=ii();ya.exports=function(i,e){let r=String(Rf(i)||"").split(/\r?\n/);return e?r.map(n=>Math.ceil(n.length/e)).reduce((n,a)=>n+a):r.length}});var va=w((jb,Sa)=>{"use strict";Sa.exports=(i,e={})=>{let r=Number.isSafeInteger(parseInt(e.margin))?new Array(parseInt(e.margin)).fill(" ").join(""):e.margin||"",n=e.width;return(i||"").split(/\r?\n/g).map(a=>a.split(/\s+/g).reduce((u,l)=>(l.length+r.length>=n||u[u.length-1].length+l.length+1<n?u[u.length-1]+=` ${l}`:u.push(`${r}${l}`),u),[r]).join(`
`)).join(`
`)}});var Ra=w((Ub,Ta)=>{"use strict";Ta.exports=(i,e,r)=>{r=r||e;let n=Math.min(e-r,i-Math.floor(r/2));n<0&&(n=0);let a=Math.min(n+r,e);return{startIndex:n,endIndex:a}}});var me=w((Nb,Ea)=>{"use strict";Ea.exports={action:aa(),clear:pa(),style:ba(),strip:ii(),figures:ws(),lines:wa(),wrap:va(),entriesToDisplay:Ra()}});var Me=w((zb,Aa)=>{"use strict";var xa=require("readline"),Ef=me(),xf=Ef.action,Cf=require("events"),Ca=N(),Af=Ca.beep,Pf=Ca.cursor,Of=j(),vs=class extends Cf{constructor(e={}){super(),this.firstRender=!0,this.in=e.stdin||process.stdin,this.out=e.stdout||process.stdout,this.onRender=(e.onRender||(()=>{})).bind(this);let r=xa.createInterface({input:this.in,escapeCodeTimeout:50});xa.emitKeypressEvents(this.in,r),this.in.isTTY&&this.in.setRawMode(!0);let n=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,a=(u,l)=>{let d=xf(l,n);d===!1?this._&&this._(u,l):typeof this[d]=="function"?this[d](l):this.bell()};this.close=()=>{this.out.write(Pf.show),this.in.removeListener("keypress",a),this.in.isTTY&&this.in.setRawMode(!1),r.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",a)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(Af)}render(){this.onRender(Of),this.firstRender&&(this.firstRender=!1)}};Aa.exports=vs});var Ia=w((Hb,qa)=>{"use strict";function Pa(i,e,r,n,a,u,l){try{var d=i[u](l),f=d.value}catch(p){r(p);return}d.done?e(f):Promise.resolve(f).then(n,a)}function Oa(i){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=i.apply(e,r);function l(f){Pa(u,n,a,l,d,"next",f)}function d(f){Pa(u,n,a,l,d,"throw",f)}l(void 0)})}}var si=j(),Df=Me(),Da=N(),qf=Da.erase,or=Da.cursor,ni=me(),Ts=ni.style,Rs=ni.clear,If=ni.lines,Mf=ni.figures,Es=class extends Df{constructor(e={}){super(e),this.transform=Ts.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=Rs("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=si.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this.R=e,this.fire()}get value(){return this.R}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var e=this;return Oa(function*(){let r=yield e.validator(e.value);typeof r=="string"&&(e.errorMsg=r,r=!1),e.error=!r})()}submit(){var e=this;return Oa(function*(){if(e.value=e.value||e.initial,e.cursorOffset=0,e.cursor=e.rendered.length,yield e.validate(),e.error){e.red=!0,e.fire(),e.render();return}e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write(`
`),e.close()})()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,r){let n=this.value.slice(0,this.cursor),a=this.value.slice(this.cursor);this.value=`${n}${e}${a}`,this.red=!1,this.cursor=this.placeholder?0:n.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),r=this.value.slice(this.cursor);this.value=`${e}${r}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),r=this.value.slice(this.cursor+1);this.value=`${e}${r}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(or.down(If(this.outputError,this.out.columns)-1)+Rs(this.outputError,this.out.columns)),this.out.write(Rs(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Ts.symbol(this.done,this.aborted),si.bold(this.msg),Ts.delimiter(this.done),this.red?si.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":Mf.pointerSmall} ${si.red().italic(r)}`,"")),this.out.write(qf.line+or.to(0)+this.outputText+or.save+this.outputError+or.restore+or.move(this.cursorOffset,0)))}};qa.exports=Es});var ka=w((Vb,$a)=>{"use strict";var Le=j(),Lf=Me(),ar=me(),Ma=ar.style,La=ar.clear,oi=ar.figures,$f=ar.wrap,kf=ar.entriesToDisplay,Bf=N(),_f=Bf.cursor,xs=class extends Lf{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map((r,n)=>(typeof r=="string"&&(r={title:r,value:n}),{title:r&&(r.title||r.value||r),value:r&&(r.value===void 0?n:r.value),description:r&&r.description,selected:r&&r.selected,disabled:r&&r.disabled})),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=La("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,r){if(e===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(_f.hide):this.out.write(La(this.outputText,this.out.columns)),super.render();let e=kf(this.cursor,this.choices.length,this.optionsPerPage),r=e.startIndex,n=e.endIndex;if(this.outputText=[Ma.symbol(this.done,this.aborted),Le.bold(this.msg),Ma.delimiter(!1),this.done?this.selection.title:this.selection.disabled?Le.yellow(this.warn):Le.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let a=r;a<n;a++){let u,l,d="",f=this.choices[a];a===r&&r>0?l=oi.arrowUp:a===n-1&&n<this.choices.length?l=oi.arrowDown:l=" ",f.disabled?(u=this.cursor===a?Le.gray().underline(f.title):Le.strikethrough().gray(f.title),l=(this.cursor===a?Le.bold().gray(oi.pointer)+" ":"  ")+l):(u=this.cursor===a?Le.cyan().underline(f.title):f.title,l=(this.cursor===a?Le.cyan(oi.pointer)+" ":"  ")+l,f.description&&this.cursor===a&&(d=` - ${f.description}`,(l.length+u.length+d.length>=this.out.columns||f.description.split(/\r?\n/).length>1)&&(d=`
`+$f(f.description,{margin:3,width:this.out.columns})))),this.outputText+=`${l} ${u}${Le.gray(d)}
`}}this.out.write(this.outputText)}};$a.exports=xs});var Ua=w((Yb,ja)=>{"use strict";var ai=j(),Ff=Me(),Fa=me(),Ba=Fa.style,Wf=Fa.clear,Wa=N(),_a=Wa.cursor,jf=Wa.erase,Cs=class extends Ff{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,r){if(e===" ")this.value=!this.value;else if(e==="1")this.value=!0;else if(e==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(_a.hide):this.out.write(Wf(this.outputText,this.out.columns)),super.render(),this.outputText=[Ba.symbol(this.done,this.aborted),ai.bold(this.msg),Ba.delimiter(this.done),this.value?this.inactive:ai.cyan().underline(this.inactive),ai.gray("/"),this.value?ai.cyan().underline(this.active):this.active].join(" "),this.out.write(jf.line+_a.to(0)+this.outputText))}};ja.exports=Cs});var we=w((Gb,Na)=>{"use strict";var qt=class{constructor({token:e,date:r,parts:n,locales:a}){this.token=e,this.date=r||new Date,this.parts=n||[this],this.locales=a||{}}up(){}down(){}next(){let e=this.parts.indexOf(this);return this.parts.find((r,n)=>n>e&&r instanceof qt)}setTo(e){}prev(){let e=[].concat(this.parts).reverse(),r=e.indexOf(this);return e.find((n,a)=>a>r&&n instanceof qt)}toString(){return String(this.date)}};Na.exports=qt});var Ha=w((Qb,za)=>{"use strict";var Uf=we(),As=class extends Uf{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}};za.exports=As});var Ya=w((Kb,Va)=>{"use strict";var Nf=we(),zf=i=>(i=i%10,i===1?"st":i===2?"nd":i===3?"rd":"th"),Ps=class extends Nf{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),r=this.date.getDay();return this.token==="DD"?String(e).padStart(2,"0"):this.token==="Do"?e+zf(e):this.token==="d"?r+1:this.token==="ddd"?this.locales.weekdaysShort[r]:this.token==="dddd"?this.locales.weekdays[r]:e}};Va.exports=Ps});var Qa=w((Jb,Ga)=>{"use strict";var Hf=we(),Os=class extends Hf{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}};Ga.exports=Os});var Ja=w((Zb,Ka)=>{"use strict";var Vf=we(),Ds=class extends Vf{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};Ka.exports=Ds});var Xa=w((Xb,Za)=>{"use strict";var Yf=we(),qs=class extends Yf{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}};Za.exports=qs});var tu=w((ey,eu)=>{"use strict";var Gf=we(),Is=class extends Gf{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),r=this.token.length;return r===2?String(e+1).padStart(2,"0"):r===3?this.locales.monthsShort[e]:r===4?this.locales.months[e]:String(e+1)}};eu.exports=Is});var iu=w((ty,ru)=>{"use strict";var Qf=we(),Ms=class extends Qf{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}};ru.exports=Ms});var nu=w((ry,su)=>{"use strict";var Kf=we(),Ls=class extends Kf{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?e.substr(-2):e}};su.exports=Ls});var au=w((iy,ou)=>{"use strict";ou.exports={DatePart:we(),Meridiem:Ha(),Day:Ya(),Hours:Qa(),Milliseconds:Ja(),Minutes:Xa(),Month:tu(),Seconds:iu(),Year:nu()}});var bu=w((sy,gu)=>{"use strict";function uu(i,e,r,n,a,u,l){try{var d=i[u](l),f=d.value}catch(p){r(p);return}d.done?e(f):Promise.resolve(f).then(n,a)}function lu(i){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=i.apply(e,r);function l(f){uu(u,n,a,l,d,"next",f)}function d(f){uu(u,n,a,l,d,"throw",f)}l(void 0)})}}var $s=j(),Jf=Me(),Bs=me(),hu=Bs.style,cu=Bs.clear,Zf=Bs.figures,mu=N(),Xf=mu.erase,du=mu.cursor,$e=au(),fu=$e.DatePart,ep=$e.Meridiem,tp=$e.Day,rp=$e.Hours,ip=$e.Milliseconds,sp=$e.Minutes,np=$e.Month,op=$e.Seconds,ap=$e.Year,up=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,pu={1:({token:i})=>i.replace(/\\(.)/g,"$1"),2:i=>new tp(i),3:i=>new np(i),4:i=>new ap(i),5:i=>new ep(i),6:i=>new rp(i),7:i=>new sp(i),8:i=>new op(i),9:i=>new ip(i)},lp={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")},ks=class extends Jf{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(lp,e.locales),this.H=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=cu("",this.out.columns),this.render()}get value(){return this.date}get date(){return this.H}set date(e){e&&this.H.setTime(e.getTime())}set mask(e){let r;for(this.parts=[];r=up.exec(e);){let a=r.shift(),u=r.findIndex(l=>l!=null);this.parts.push(u in pu?pu[u]({token:r[u]||a,date:this.date,parts:this.parts,locales:this.locales}):r[u]||a)}let n=this.parts.reduce((a,u)=>(typeof u=="string"&&typeof a[a.length-1]=="string"?a[a.length-1]+=u:a.push(u),a),[]);this.parts.splice(0),this.parts.push(...n),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex(e=>e instanceof fu)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var e=this;return lu(function*(){let r=yield e.validator(e.value);typeof r=="string"&&(e.errorMsg=r,r=!1),e.error=!r})()}submit(){var e=this;return lu(function*(){if(yield e.validate(),e.error){e.color="red",e.fire(),e.render();return}e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write(`
`),e.close()})()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex(r=>r instanceof fu)),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(du.hide):this.out.write(cu(this.outputText,this.out.columns)),super.render(),this.outputText=[hu.symbol(this.done,this.aborted),$s.bold(this.msg),hu.delimiter(!1),this.parts.reduce((e,r,n)=>e.concat(n===this.cursor&&!this.done?$s.cyan().underline(r.toString()):r),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":Zf.pointerSmall} ${$s.red().italic(r)}`,"")),this.out.write(Xf.line+du.to(0)+this.outputText))}};gu.exports=ks});var Eu=w((ny,Ru)=>{"use strict";function yu(i,e,r,n,a,u,l){try{var d=i[u](l),f=d.value}catch(p){r(p);return}d.done?e(f):Promise.resolve(f).then(n,a)}function wu(i){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=i.apply(e,r);function l(f){yu(u,n,a,l,d,"next",f)}function d(f){yu(u,n,a,l,d,"throw",f)}l(void 0)})}}var ui=j(),hp=Me(),Tu=N(),li=Tu.cursor,cp=Tu.erase,hi=me(),_s=hi.style,dp=hi.figures,Su=hi.clear,fp=hi.lines,pp=/[0-9]/,Fs=i=>i!==void 0,vu=(i,e)=>{let r=Math.pow(10,e);return Math.round(i*r)/r},Ws=class extends hp{constructor(e={}){super(e),this.transform=_s.render(e.style),this.msg=e.message,this.initial=Fs(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=Fs(e.min)?e.min:-1/0,this.max=Fs(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){!e&&e!==0?(this.placeholder=!0,this.rendered=ui.gray(this.transform.render(`${this.initial}`)),this.R=""):(this.placeholder=!1,this.rendered=this.transform.render(`${vu(e,this.round)}`),this.R=vu(e,this.round)),this.fire()}get value(){return this.R}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return e==="-"||e==="."&&this.float||pp.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=e!==""?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}validate(){var e=this;return wu(function*(){let r=yield e.validator(e.value);typeof r=="string"&&(e.errorMsg=r,r=!1),e.error=!r})()}submit(){var e=this;return wu(function*(){if(yield e.validate(),e.error){e.color="red",e.fire(),e.render();return}let r=e.value;e.value=r!==""?r:e.initial,e.done=!0,e.aborted=!1,e.error=!1,e.fire(),e.render(),e.out.write(`
`),e.close()})()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(e.length===0)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,r){if(!this.valid(e))return this.bell();let n=Date.now();if(n-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=n,this.color="cyan",e===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(li.down(fp(this.outputError,this.out.columns)-1)+Su(this.outputError,this.out.columns)),this.out.write(Su(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[_s.symbol(this.done,this.aborted),ui.bold(this.msg),_s.delimiter(this.done),!this.done||!this.done&&!this.placeholder?ui[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":dp.pointerSmall} ${ui.red().italic(r)}`,"")),this.out.write(cp.line+li.to(0)+this.outputText+li.save+this.outputError+li.restore))}};Ru.exports=Ws});var Us=w((oy,Au)=>{"use strict";var Se=j(),mp=N(),gp=mp.cursor,bp=Me(),ur=me(),xu=ur.clear,Xe=ur.figures,Cu=ur.style,yp=ur.wrap,wp=ur.entriesToDisplay,js=class extends bp{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map((r,n)=>(typeof r=="string"&&(r={title:r,value:n}),{title:r&&(r.title||r.value||r),description:r&&r.description,value:r&&(r.value===void 0?n:r.value),selected:r&&r.selected,disabled:r&&r.disabled})),this.clear=xu("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map(e=>!e.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(e=>e.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){let e=this.value.filter(r=>r.selected);this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){let e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();let e=!this.value[this.cursor].selected;this.value.filter(r=>!r.disabled).forEach(r=>r.selected=e),this.render()}_(e,r){if(e===" ")this.handleSpaceToggle();else if(e==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${Xe.arrowUp}/${Xe.arrowDown}: Highlight option
    ${Xe.arrowLeft}/${Xe.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(e,r,n,a){let u=(r.selected?Se.green(Xe.radioOn):Xe.radioOff)+" "+a+" ",l,d;return r.disabled?l=e===n?Se.gray().underline(r.title):Se.strikethrough().gray(r.title):(l=e===n?Se.cyan().underline(r.title):r.title,e===n&&r.description&&(d=` - ${r.description}`,(u.length+l.length+d.length>=this.out.columns||r.description.split(/\r?\n/).length>1)&&(d=`
`+yp(r.description,{margin:u.length,width:this.out.columns})))),u+l+Se.gray(d||"")}paginateOptions(e){if(e.length===0)return Se.red("No matches for this query.");let r=wp(this.cursor,e.length,this.optionsPerPage),n=r.startIndex,a=r.endIndex,u,l=[];for(let d=n;d<a;d++)d===n&&n>0?u=Xe.arrowUp:d===a-1&&a<e.length?u=Xe.arrowDown:u=" ",l.push(this.renderOption(this.cursor,e[d],d,u));return`
`+l.join(`
`)}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");let e=[Se.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&e.push(Se.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(gp.hide),super.render();let e=[Cu.symbol(this.done,this.aborted),Se.bold(this.msg),Cu.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=Se.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.value),this.out.write(this.clear+e),this.clear=xu(e,this.out.columns)}};Au.exports=js});var Lu=w((ay,Mu)=>{"use strict";function Pu(i,e,r,n,a,u,l){try{var d=i[u](l),f=d.value}catch(p){r(p);return}d.done?e(f):Promise.resolve(f).then(n,a)}function Sp(i){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=i.apply(e,r);function l(f){Pu(u,n,a,l,d,"next",f)}function d(f){Pu(u,n,a,l,d,"throw",f)}l(void 0)})}}var lr=j(),vp=Me(),Iu=N(),Tp=Iu.erase,Ou=Iu.cursor,hr=me(),Ns=hr.style,Du=hr.clear,zs=hr.figures,Rp=hr.wrap,Ep=hr.entriesToDisplay,qu=(i,e)=>i[e]&&(i[e].value||i[e].title||i[e]),xp=(i,e)=>i[e]&&(i[e].title||i[e].value||i[e]),Cp=(i,e)=>{let r=i.findIndex(n=>n.value===e||n.title===e);return r>-1?r:void 0},Hs=class extends vp{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial=typeof e.initial=="number"?e.initial:Cp(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=Ns.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=Du("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this.y=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return typeof this.y=="number"?e=this.choices[this.y]:typeof this.y=="string"&&(e={title:this.y}),e||this.y||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=qu(this.suggestions,e):this.value=this.fallback.value,this.fire()}complete(e){var r=this;return Sp(function*(){let n=r.completing=r.suggest(r.input,r.choices),a=yield n;if(r.completing!==n)return;r.suggestions=a.map((l,d,f)=>({title:xp(f,d),value:qu(f,d),description:l.description})),r.completing=!1;let u=Math.max(a.length-1,0);r.moveSelect(Math.min(u,r.select)),e&&e()})()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){let n=this.input.slice(0,this.cursor),a=this.input.slice(this.cursor);this.input=`${n}${e}${a}`,this.cursor=n.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let e=this.input.slice(0,this.cursor-1),r=this.input.slice(this.cursor);this.input=`${e}${r}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),r=this.input.slice(this.cursor+1);this.input=`${e}${r}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,r,n,a){let u,l=n?zs.arrowUp:a?zs.arrowDown:" ",d=r?lr.cyan().underline(e.title):e.title;return l=(r?lr.cyan(zs.pointer)+" ":"  ")+l,e.description&&(u=` - ${e.description}`,(l.length+d.length+u.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(u=`
`+Rp(e.description,{margin:3,width:this.out.columns}))),l+" "+d+lr.gray(u||"")}render(){if(this.closed)return;this.firstRender?this.out.write(Ou.hide):this.out.write(Du(this.outputText,this.out.columns)),super.render();let e=Ep(this.select,this.choices.length,this.limit),r=e.startIndex,n=e.endIndex;if(this.outputText=[Ns.symbol(this.done,this.aborted,this.exited),lr.bold(this.msg),Ns.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){let a=this.suggestions.slice(r,n).map((u,l)=>this.renderOption(u,this.select===l+r,l===0&&r>0,l+r===n-1&&n<this.choices.length)).join(`
`);this.outputText+=`
`+(a||lr.gray(this.fallback.title))}this.out.write(Tp.line+Ou.to(0)+this.outputText)}};Mu.exports=Hs});var _u=w((uy,Bu)=>{"use strict";var ke=j(),Ap=N(),Pp=Ap.cursor,Op=Us(),Ys=me(),$u=Ys.clear,ku=Ys.style,It=Ys.figures,Vs=class extends Op{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=$u("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){let e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(n=>this.inputValue?!!(typeof n.title=="string"&&n.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof n.value=="string"&&n.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);let r=this.filteredOptions.findIndex(n=>n===e);this.cursor=r<0?0:r,this.render()}handleSpaceToggle(){let e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,r){e===" "?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${It.arrowUp}/${It.arrowDown}: Highlight option
    ${It.arrowLeft}/${It.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:ke.gray("Enter something to filter")}
`}renderOption(e,r,n){let a;return r.disabled?a=e===n?ke.gray().underline(r.title):ke.strikethrough().gray(r.title):a=e===n?ke.cyan().underline(r.title):r.title,(r.selected?ke.green(It.radioOn):It.radioOff)+"  "+a}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");let e=[ke.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&e.push(ke.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Pp.hide),super.render();let e=[ku.symbol(this.done,this.aborted),ke.bold(this.msg),ku.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=ke.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+e),this.clear=$u(e,this.out.columns)}};Bu.exports=Vs});var Hu=w((ly,zu)=>{"use strict";var Fu=j(),Dp=Me(),Uu=me(),Wu=Uu.style,qp=Uu.clear,Nu=N(),Ip=Nu.erase,ju=Nu.cursor,Gs=class extends Dp{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){return e.toLowerCase()==="y"?(this.value=!0,this.submit()):e.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(ju.hide):this.out.write(qp(this.outputText,this.out.columns)),super.render(),this.outputText=[Wu.symbol(this.done,this.aborted),Fu.bold(this.msg),Wu.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Fu.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(Ip.line+ju.to(0)+this.outputText))}};zu.exports=Gs});var Yu=w((hy,Vu)=>{"use strict";Vu.exports={TextPrompt:Ia(),SelectPrompt:ka(),TogglePrompt:Ua(),DatePrompt:bu(),NumberPrompt:Eu(),MultiselectPrompt:Us(),AutocompletePrompt:Lu(),AutocompleteMultiselectPrompt:_u(),ConfirmPrompt:Hu()}});var Qu=w(Gu=>{"use strict";var Z=Gu,Mp=Yu(),ci=i=>i;function ve(i,e,r={}){return new Promise((n,a)=>{let u=new Mp[i](e),l=r.onAbort||ci,d=r.onSubmit||ci,f=r.onExit||ci;u.on("state",e.onState||ci),u.on("submit",p=>n(d(p))),u.on("exit",p=>n(f(p))),u.on("abort",p=>a(l(p)))})}Z.text=i=>ve("TextPrompt",i);Z.password=i=>(i.style="password",Z.text(i));Z.invisible=i=>(i.style="invisible",Z.text(i));Z.number=i=>ve("NumberPrompt",i);Z.date=i=>ve("DatePrompt",i);Z.confirm=i=>ve("ConfirmPrompt",i);Z.list=i=>{let e=i.separator||",";return ve("TextPrompt",i,{onSubmit:r=>r.split(e).map(n=>n.trim())})};Z.toggle=i=>ve("TogglePrompt",i);Z.select=i=>ve("SelectPrompt",i);Z.multiselect=i=>{i.choices=[].concat(i.choices||[]);let e=r=>r.filter(n=>n.selected).map(n=>n.value);return ve("MultiselectPrompt",i,{onAbort:e,onSubmit:e})};Z.autocompleteMultiselect=i=>{i.choices=[].concat(i.choices||[]);let e=r=>r.filter(n=>n.selected).map(n=>n.value);return ve("AutocompleteMultiselectPrompt",i,{onAbort:e,onSubmit:e})};var Lp=(i,e)=>Promise.resolve(e.filter(r=>r.title.slice(0,i.length).toLowerCase()===i.toLowerCase()));Z.autocomplete=i=>(i.suggest=i.suggest||Lp,i.choices=[].concat(i.choices||[]),ve("AutocompletePrompt",i))});var il=w((dy,rl)=>{"use strict";function Ku(i,e){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),r.push.apply(r,n)}return r}function Ju(i){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ku(Object(r),!0).forEach(function(n){$p(i,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(r,n))})}return i}function $p(i,e,r){return e in i?Object.defineProperty(i,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[e]=r,i}function kp(i,e){var r=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!r){if(Array.isArray(i)||(r=Bp(i))||e&&i&&typeof i.length=="number"){r&&(i=r);var n=0,a=function(){};return{s:a,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(p){throw p},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,d;return{s:function(){r=r.call(i)},n:function(){var p=r.next();return u=p.done,p},e:function(p){l=!0,d=p},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(l)throw d}}}}function Bp(i,e){if(!!i){if(typeof i=="string")return Zu(i,e);var r=Object.prototype.toString.call(i).slice(8,-1);if(r==="Object"&&i.constructor&&(r=i.constructor.name),r==="Map"||r==="Set")return Array.from(i);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zu(i,e)}}function Zu(i,e){(e==null||e>i.length)&&(e=i.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=i[r];return n}function Xu(i,e,r,n,a,u,l){try{var d=i[u](l),f=d.value}catch(p){r(p);return}d.done?e(f):Promise.resolve(f).then(n,a)}function el(i){return function(){var e=this,r=arguments;return new Promise(function(n,a){var u=i.apply(e,r);function l(f){Xu(u,n,a,l,d,"next",f)}function d(f){Xu(u,n,a,l,d,"throw",f)}l(void 0)})}}var Qs=Qu(),_p=["suggest","format","onState","validate","onRender","type"],tl=()=>{};function et(){return Ks.apply(this,arguments)}function Ks(){return Ks=el(function*(i=[],{onSubmit:e=tl,onCancel:r=tl}={}){let n={},a=et.he||{};i=[].concat(i);let u,l,d,f,p,A,R=function(){var x=el(function*(E,$,Y=!1){if(!(!Y&&E.validate&&E.validate($)!==!0))return E.format?yield E.format($,n):$});return function($,Y){return x.apply(this,arguments)}}();var S=kp(i),b;try{for(S.s();!(b=S.n()).done;){l=b.value;var y=l;if(f=y.name,p=y.type,typeof p=="function"&&(p=yield p(u,Ju({},n),l),l.type=p),!!p){for(let x in l){if(_p.includes(x))continue;let E=l[x];l[x]=typeof E=="function"?yield E(u,Ju({},n),A):E}if(A=l,typeof l.message!="string")throw new Error("prompt message is required");var M=l;if(f=M.name,p=M.type,Qs[p]===void 0)throw new Error(`prompt type (${p}) is not defined`);if(a[l.name]!==void 0&&(u=yield R(l,a[l.name]),u!==void 0)){n[f]=u;continue}try{u=et.I?Fp(et.I,l.initial):yield Qs[p](l),n[f]=u=yield R(l,u,!0),d=yield e(l,u,n)}catch(x){d=!(yield r(l,n))}if(d)return n}}}catch(x){S.e(x)}finally{S.f()}return n}),Ks.apply(this,arguments)}function Fp(i,e){let r=i.shift();if(r instanceof Error)throw r;return r===void 0?e:r}function Wp(i){et.I=(et.I||[]).concat(i)}function jp(i){et.he=Object.assign({},i)}rl.exports=Object.assign(et,{prompt:et,prompts:Qs,inject:Wp,override:jp})});var nl=w((fy,sl)=>{"use strict";sl.exports=(i,e)=>{if(!(i.meta&&i.name!=="escape")){if(i.ctrl){if(i.name==="a")return"first";if(i.name==="c"||i.name==="d")return"abort";if(i.name==="e")return"last";if(i.name==="g")return"reset"}if(e){if(i.name==="j")return"down";if(i.name==="k")return"up"}return i.name==="return"||i.name==="enter"?"submit":i.name==="backspace"?"delete":i.name==="delete"?"deleteForward":i.name==="abort"?"abort":i.name==="escape"?"exit":i.name==="tab"?"next":i.name==="pagedown"?"nextPage":i.name==="pageup"?"prevPage":i.name==="home"?"home":i.name==="end"?"end":i.name==="up"?"up":i.name==="down"?"down":i.name==="right"?"right":i.name==="left"?"left":!1}}});var di=w((py,ol)=>{"use strict";ol.exports=i=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(e,"g");return typeof i=="string"?i.replace(r,""):i}});var ll=w((my,ul)=>{"use strict";var Up=di(),{erase:al,cursor:Np}=N(),zp=i=>[...Up(i)].length;ul.exports=function(i,e){if(!e)return al.line+Np.to(0);let r=0,n=i.split(/\r?\n/);for(let a of n)r+=1+Math.floor(Math.max(zp(a)-1,0)/e);return al.lines(r)}});var Js=w((gy,hl)=>{"use strict";var cr={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Hp={arrowUp:cr.arrowUp,arrowDown:cr.arrowDown,arrowLeft:cr.arrowLeft,arrowRight:cr.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},Vp=process.platform==="win32"?Hp:cr;hl.exports=Vp});var dl=w((by,cl)=>{"use strict";var Mt=j(),ct=Js(),Zs=Object.freeze({password:{scale:1,render:i=>"*".repeat(i.length)},emoji:{scale:2,render:i=>"\u{1F603}".repeat(i.length)},invisible:{scale:0,render:i=>""},default:{scale:1,render:i=>`${i}`}}),Yp=i=>Zs[i]||Zs.default,dr=Object.freeze({aborted:Mt.red(ct.cross),done:Mt.green(ct.tick),exited:Mt.yellow(ct.cross),default:Mt.cyan("?")}),Gp=(i,e,r)=>e?dr.aborted:r?dr.exited:i?dr.done:dr.default,Qp=i=>Mt.gray(i?ct.ellipsis:ct.pointerSmall),Kp=(i,e)=>Mt.gray(i?e?ct.pointerSmall:"+":ct.line);cl.exports={styles:Zs,render:Yp,symbols:dr,symbol:Gp,delimiter:Qp,item:Kp}});var pl=w((yy,fl)=>{"use strict";var Jp=di();fl.exports=function(i,e){let r=String(Jp(i)||"").split(/\r?\n/);return e?r.map(n=>Math.ceil(n.length/e)).reduce((n,a)=>n+a):r.length}});var gl=w((wy,ml)=>{"use strict";ml.exports=(i,e={})=>{let r=Number.isSafeInteger(parseInt(e.margin))?new Array(parseInt(e.margin)).fill(" ").join(""):e.margin||"",n=e.width;return(i||"").split(/\r?\n/g).map(a=>a.split(/\s+/g).reduce((u,l)=>(l.length+r.length>=n||u[u.length-1].length+l.length+1<n?u[u.length-1]+=` ${l}`:u.push(`${r}${l}`),u),[r]).join(`
`)).join(`
`)}});var yl=w((Sy,bl)=>{"use strict";bl.exports=(i,e,r)=>{r=r||e;let n=Math.min(e-r,i-Math.floor(r/2));n<0&&(n=0);let a=Math.min(n+r,e);return{startIndex:n,endIndex:a}}});var ge=w((vy,wl)=>{"use strict";wl.exports={action:nl(),clear:ll(),style:dl(),strip:di(),figures:Js(),lines:pl(),wrap:gl(),entriesToDisplay:yl()}});var Be=w((Ty,vl)=>{"use strict";var Sl=require("readline"),{action:Zp}=ge(),Xp=require("events"),{beep:em,cursor:tm}=N(),rm=j(),Xs=class extends Xp{constructor(e={}){super(),this.firstRender=!0,this.in=e.stdin||process.stdin,this.out=e.stdout||process.stdout,this.onRender=(e.onRender||(()=>{})).bind(this);let r=Sl.createInterface({input:this.in,escapeCodeTimeout:50});Sl.emitKeypressEvents(this.in,r),this.in.isTTY&&this.in.setRawMode(!0);let n=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,a=(u,l)=>{let d=Zp(l,n);d===!1?this._&&this._(u,l):typeof this[d]=="function"?this[d](l):this.bell()};this.close=()=>{this.out.write(tm.show),this.in.removeListener("keypress",a),this.in.isTTY&&this.in.setRawMode(!1),r.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",a)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(em)}render(){this.onRender(rm),this.firstRender&&(this.firstRender=!1)}};vl.exports=Xs});var Rl=w((Ry,Tl)=>{var fi=j(),im=Be(),{erase:sm,cursor:fr}=N(),{style:en,clear:tn,lines:nm,figures:om}=ge(),rn=class extends im{constructor(e={}){super(e),this.transform=en.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=tn("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=fi.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this.R=e,this.fire()}get value(){return this.R}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,r){let n=this.value.slice(0,this.cursor),a=this.value.slice(this.cursor);this.value=`${n}${e}${a}`,this.red=!1,this.cursor=this.placeholder?0:n.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),r=this.value.slice(this.cursor);this.value=`${e}${r}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),r=this.value.slice(this.cursor+1);this.value=`${e}${r}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(fr.down(nm(this.outputError,this.out.columns)-1)+tn(this.outputError,this.out.columns)),this.out.write(tn(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[en.symbol(this.done,this.aborted),fi.bold(this.msg),en.delimiter(this.done),this.red?fi.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":om.pointerSmall} ${fi.red().italic(r)}`,"")),this.out.write(sm.line+fr.to(0)+this.outputText+fr.save+this.outputError+fr.restore+fr.move(this.cursorOffset,0)))}};Tl.exports=rn});var Al=w((Ey,Cl)=>{"use strict";var _e=j(),am=Be(),{style:El,clear:xl,figures:pi,wrap:um,entriesToDisplay:lm}=ge(),{cursor:hm}=N(),sn=class extends am{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map((r,n)=>(typeof r=="string"&&(r={title:r,value:n}),{title:r&&(r.title||r.value||r),value:r&&(r.value===void 0?n:r.value),description:r&&r.description,selected:r&&r.selected,disabled:r&&r.disabled})),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=xl("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,r){if(e===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(hm.hide):this.out.write(xl(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:r}=lm(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[El.symbol(this.done,this.aborted),_e.bold(this.msg),El.delimiter(!1),this.done?this.selection.title:this.selection.disabled?_e.yellow(this.warn):_e.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let n=e;n<r;n++){let a,u,l="",d=this.choices[n];n===e&&e>0?u=pi.arrowUp:n===r-1&&r<this.choices.length?u=pi.arrowDown:u=" ",d.disabled?(a=this.cursor===n?_e.gray().underline(d.title):_e.strikethrough().gray(d.title),u=(this.cursor===n?_e.bold().gray(pi.pointer)+" ":"  ")+u):(a=this.cursor===n?_e.cyan().underline(d.title):d.title,u=(this.cursor===n?_e.cyan(pi.pointer)+" ":"  ")+u,d.description&&this.cursor===n&&(l=` - ${d.description}`,(u.length+a.length+l.length>=this.out.columns||d.description.split(/\r?\n/).length>1)&&(l=`
`+um(d.description,{margin:3,width:this.out.columns})))),this.outputText+=`${u} ${a}${_e.gray(l)}
`}}this.out.write(this.outputText)}};Cl.exports=sn});var ql=w((xy,Dl)=>{var mi=j(),cm=Be(),{style:Pl,clear:dm}=ge(),{cursor:Ol,erase:fm}=N(),nn=class extends cm{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,r){if(e===" ")this.value=!this.value;else if(e==="1")this.value=!0;else if(e==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(Ol.hide):this.out.write(dm(this.outputText,this.out.columns)),super.render(),this.outputText=[Pl.symbol(this.done,this.aborted),mi.bold(this.msg),Pl.delimiter(this.done),this.value?this.inactive:mi.cyan().underline(this.inactive),mi.gray("/"),this.value?mi.cyan().underline(this.active):this.active].join(" "),this.out.write(fm.line+Ol.to(0)+this.outputText))}};Dl.exports=nn});var Te=w((Cy,Il)=>{"use strict";var Lt=class{constructor({token:e,date:r,parts:n,locales:a}){this.token=e,this.date=r||new Date,this.parts=n||[this],this.locales=a||{}}up(){}down(){}next(){let e=this.parts.indexOf(this);return this.parts.find((r,n)=>n>e&&r instanceof Lt)}setTo(e){}prev(){let e=[].concat(this.parts).reverse(),r=e.indexOf(this);return e.find((n,a)=>a>r&&n instanceof Lt)}toString(){return String(this.date)}};Il.exports=Lt});var Ll=w((Ay,Ml)=>{"use strict";var pm=Te(),on=class extends pm{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}};Ml.exports=on});var kl=w((Py,$l)=>{"use strict";var mm=Te(),gm=i=>(i=i%10,i===1?"st":i===2?"nd":i===3?"rd":"th"),an=class extends mm{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),r=this.date.getDay();return this.token==="DD"?String(e).padStart(2,"0"):this.token==="Do"?e+gm(e):this.token==="d"?r+1:this.token==="ddd"?this.locales.weekdaysShort[r]:this.token==="dddd"?this.locales.weekdays[r]:e}};$l.exports=an});var _l=w((Oy,Bl)=>{"use strict";var bm=Te(),un=class extends bm{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}};Bl.exports=un});var Wl=w((Dy,Fl)=>{"use strict";var ym=Te(),ln=class extends ym{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}};Fl.exports=ln});var Ul=w((qy,jl)=>{"use strict";var wm=Te(),hn=class extends wm{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}};jl.exports=hn});var zl=w((Iy,Nl)=>{"use strict";var Sm=Te(),cn=class extends Sm{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),r=this.token.length;return r===2?String(e+1).padStart(2,"0"):r===3?this.locales.monthsShort[e]:r===4?this.locales.months[e]:String(e+1)}};Nl.exports=cn});var Vl=w((My,Hl)=>{"use strict";var vm=Te(),dn=class extends vm{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}};Hl.exports=dn});var Gl=w((Ly,Yl)=>{"use strict";var Tm=Te(),fn=class extends Tm{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?e.substr(-2):e}};Yl.exports=fn});var Kl=w(($y,Ql)=>{"use strict";Ql.exports={DatePart:Te(),Meridiem:Ll(),Day:kl(),Hours:_l(),Milliseconds:Wl(),Minutes:Ul(),Month:zl(),Seconds:Vl(),Year:Gl()}});var ih=w((ky,rh)=>{"use strict";var pn=j(),Rm=Be(),{style:Jl,clear:Zl,figures:Em}=ge(),{erase:xm,cursor:Xl}=N(),{DatePart:eh,Meridiem:Cm,Day:Am,Hours:Pm,Milliseconds:Om,Minutes:Dm,Month:qm,Seconds:Im,Year:Mm}=Kl(),Lm=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,th={1:({token:i})=>i.replace(/\\(.)/g,"$1"),2:i=>new Am(i),3:i=>new qm(i),4:i=>new Mm(i),5:i=>new Cm(i),6:i=>new Pm(i),7:i=>new Dm(i),8:i=>new Im(i),9:i=>new Om(i)},$m={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")},mn=class extends Rm{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign($m,e.locales),this.H=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=Zl("",this.out.columns),this.render()}get value(){return this.date}get date(){return this.H}set date(e){e&&this.H.setTime(e.getTime())}set mask(e){let r;for(this.parts=[];r=Lm.exec(e);){let a=r.shift(),u=r.findIndex(l=>l!=null);this.parts.push(u in th?th[u]({token:r[u]||a,date:this.date,parts:this.parts,locales:this.locales}):r[u]||a)}let n=this.parts.reduce((a,u)=>(typeof u=="string"&&typeof a[a.length-1]=="string"?a[a.length-1]+=u:a.push(u),a),[]);this.parts.splice(0),this.parts.push(...n),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex(e=>e instanceof eh)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex(r=>r instanceof eh)),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(Xl.hide):this.out.write(Zl(this.outputText,this.out.columns)),super.render(),this.outputText=[Jl.symbol(this.done,this.aborted),pn.bold(this.msg),Jl.delimiter(!1),this.parts.reduce((e,r,n)=>e.concat(n===this.cursor&&!this.done?pn.cyan().underline(r.toString()):r),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":Em.pointerSmall} ${pn.red().italic(r)}`,"")),this.out.write(xm.line+Xl.to(0)+this.outputText))}};rh.exports=mn});var ah=w((By,oh)=>{var gi=j(),km=Be(),{cursor:bi,erase:Bm}=N(),{style:gn,figures:_m,clear:sh,lines:Fm}=ge(),Wm=/[0-9]/,bn=i=>i!==void 0,nh=(i,e)=>{let r=Math.pow(10,e);return Math.round(i*r)/r},yn=class extends km{constructor(e={}){super(e),this.transform=gn.render(e.style),this.msg=e.message,this.initial=bn(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=bn(e.min)?e.min:-1/0,this.max=bn(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){!e&&e!==0?(this.placeholder=!0,this.rendered=gi.gray(this.transform.render(`${this.initial}`)),this.R=""):(this.placeholder=!1,this.rendered=this.transform.render(`${nh(e,this.round)}`),this.R=nh(e,this.round)),this.fire()}get value(){return this.R}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return e==="-"||e==="."&&this.float||Wm.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=e!==""?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let e=this.value;this.value=e!==""?e:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(e.length===0)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,r){if(!this.valid(e))return this.bell();let n=Date.now();if(n-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=n,this.color="cyan",e===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(bi.down(Fm(this.outputError,this.out.columns)-1)+sh(this.outputError,this.out.columns)),this.out.write(sh(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[gn.symbol(this.done,this.aborted),gi.bold(this.msg),gn.delimiter(this.done),!this.done||!this.done&&!this.placeholder?gi[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,r,n)=>e+`
${n?" ":_m.pointerSmall} ${gi.red().italic(r)}`,"")),this.out.write(Bm.line+bi.to(0)+this.outputText+bi.save+this.outputError+bi.restore))}};oh.exports=yn});var Sn=w((_y,hh)=>{"use strict";var Re=j(),{cursor:jm}=N(),Um=Be(),{clear:uh,figures:tt,style:lh,wrap:Nm,entriesToDisplay:zm}=ge(),wn=class extends Um{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map((r,n)=>(typeof r=="string"&&(r={title:r,value:n}),{title:r&&(r.title||r.value||r),description:r&&r.description,value:r&&(r.value===void 0?n:r.value),selected:r&&r.selected,disabled:r&&r.disabled})),this.clear=uh("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map(e=>!e.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(e=>e.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){let e=this.value.filter(r=>r.selected);this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){let e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();let e=!this.value[this.cursor].selected;this.value.filter(r=>!r.disabled).forEach(r=>r.selected=e),this.render()}_(e,r){if(e===" ")this.handleSpaceToggle();else if(e==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${tt.arrowUp}/${tt.arrowDown}: Highlight option
    ${tt.arrowLeft}/${tt.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(e,r,n,a){let u=(r.selected?Re.green(tt.radioOn):tt.radioOff)+" "+a+" ",l,d;return r.disabled?l=e===n?Re.gray().underline(r.title):Re.strikethrough().gray(r.title):(l=e===n?Re.cyan().underline(r.title):r.title,e===n&&r.description&&(d=` - ${r.description}`,(u.length+l.length+d.length>=this.out.columns||r.description.split(/\r?\n/).length>1)&&(d=`
`+Nm(r.description,{margin:u.length,width:this.out.columns})))),u+l+Re.gray(d||"")}paginateOptions(e){if(e.length===0)return Re.red("No matches for this query.");let{startIndex:r,endIndex:n}=zm(this.cursor,e.length,this.optionsPerPage),a,u=[];for(let l=r;l<n;l++)l===r&&r>0?a=tt.arrowUp:l===n-1&&n<e.length?a=tt.arrowDown:a=" ",u.push(this.renderOption(this.cursor,e[l],l,a));return`
`+u.join(`
`)}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");let e=[Re.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&e.push(Re.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(jm.hide),super.render();let e=[lh.symbol(this.done,this.aborted),Re.bold(this.msg),lh.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=Re.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.value),this.out.write(this.clear+e),this.clear=uh(e,this.out.columns)}};hh.exports=wn});var mh=w((Fy,ph)=>{"use strict";var pr=j(),Hm=Be(),{erase:Vm,cursor:ch}=N(),{style:vn,clear:dh,figures:Tn,wrap:Ym,entriesToDisplay:Gm}=ge(),fh=(i,e)=>i[e]&&(i[e].value||i[e].title||i[e]),Qm=(i,e)=>i[e]&&(i[e].title||i[e].value||i[e]),Km=(i,e)=>{let r=i.findIndex(n=>n.value===e||n.title===e);return r>-1?r:void 0},Rn=class extends Hm{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial=typeof e.initial=="number"?e.initial:Km(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=vn.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=dh("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this.y=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return typeof this.y=="number"?e=this.choices[this.y]:typeof this.y=="string"&&(e={title:this.y}),e||this.y||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=fh(this.suggestions,e):this.value=this.fallback.value,this.fire()}async complete(e){let r=this.completing=this.suggest(this.input,this.choices),n=await r;if(this.completing!==r)return;this.suggestions=n.map((u,l,d)=>({title:Qm(d,l),value:fh(d,l),description:u.description})),this.completing=!1;let a=Math.max(n.length-1,0);this.moveSelect(Math.min(a,this.select)),e&&e()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){let n=this.input.slice(0,this.cursor),a=this.input.slice(this.cursor);this.input=`${n}${e}${a}`,this.cursor=n.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let e=this.input.slice(0,this.cursor-1),r=this.input.slice(this.cursor);this.input=`${e}${r}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),r=this.input.slice(this.cursor+1);this.input=`${e}${r}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,r,n,a){let u,l=n?Tn.arrowUp:a?Tn.arrowDown:" ",d=r?pr.cyan().underline(e.title):e.title;return l=(r?pr.cyan(Tn.pointer)+" ":"  ")+l,e.description&&(u=` - ${e.description}`,(l.length+d.length+u.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(u=`
`+Ym(e.description,{margin:3,width:this.out.columns}))),l+" "+d+pr.gray(u||"")}render(){if(this.closed)return;this.firstRender?this.out.write(ch.hide):this.out.write(dh(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:r}=Gm(this.select,this.choices.length,this.limit);if(this.outputText=[vn.symbol(this.done,this.aborted,this.exited),pr.bold(this.msg),vn.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){let n=this.suggestions.slice(e,r).map((a,u)=>this.renderOption(a,this.select===u+e,u===0&&e>0,u+e===r-1&&r<this.choices.length)).join(`
`);this.outputText+=`
`+(n||pr.gray(this.fallback.title))}this.out.write(Vm.line+ch.to(0)+this.outputText)}};ph.exports=Rn});var wh=w((Wy,yh)=>{"use strict";var Fe=j(),{cursor:Jm}=N(),Zm=Sn(),{clear:gh,style:bh,figures:$t}=ge(),En=class extends Zm{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=gh("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){let e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(n=>this.inputValue?!!(typeof n.title=="string"&&n.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof n.value=="string"&&n.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);let r=this.filteredOptions.findIndex(n=>n===e);this.cursor=r<0?0:r,this.render()}handleSpaceToggle(){let e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,r){e===" "?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${$t.arrowUp}/${$t.arrowDown}: Highlight option
    ${$t.arrowLeft}/${$t.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:Fe.gray("Enter something to filter")}
`}renderOption(e,r,n){let a;return r.disabled?a=e===n?Fe.gray().underline(r.title):Fe.strikethrough().gray(r.title):a=e===n?Fe.cyan().underline(r.title):r.title,(r.selected?Fe.green($t.radioOn):$t.radioOff)+"  "+a}renderDoneOrInstructions(){if(this.done)return this.value.filter(r=>r.selected).map(r=>r.title).join(", ");let e=[Fe.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&e.push(Fe.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Jm.hide),super.render();let e=[bh.symbol(this.done,this.aborted),Fe.bold(this.msg),bh.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=Fe.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+e),this.clear=gh(e,this.out.columns)}};yh.exports=En});var Eh=w((jy,Rh)=>{var Sh=j(),Xm=Be(),{style:vh,clear:eg}=ge(),{erase:tg,cursor:Th}=N(),xn=class extends Xm{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,r){return e.toLowerCase()==="y"?(this.value=!0,this.submit()):e.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(Th.hide):this.out.write(eg(this.outputText,this.out.columns)),super.render(),this.outputText=[vh.symbol(this.done,this.aborted),Sh.bold(this.msg),vh.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Sh.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(tg.line+Th.to(0)+this.outputText))}};Rh.exports=xn});var Ch=w((Uy,xh)=>{"use strict";xh.exports={TextPrompt:Rl(),SelectPrompt:Al(),TogglePrompt:ql(),DatePrompt:ih(),NumberPrompt:ah(),MultiselectPrompt:Sn(),AutocompletePrompt:mh(),AutocompleteMultiselectPrompt:wh(),ConfirmPrompt:Eh()}});var Ph=w(Ah=>{"use strict";var X=Ah,rg=Ch(),yi=i=>i;function Ee(i,e,r={}){return new Promise((n,a)=>{let u=new rg[i](e),l=r.onAbort||yi,d=r.onSubmit||yi,f=r.onExit||yi;u.on("state",e.onState||yi),u.on("submit",p=>n(d(p))),u.on("exit",p=>n(f(p))),u.on("abort",p=>a(l(p)))})}X.text=i=>Ee("TextPrompt",i);X.password=i=>(i.style="password",X.text(i));X.invisible=i=>(i.style="invisible",X.text(i));X.number=i=>Ee("NumberPrompt",i);X.date=i=>Ee("DatePrompt",i);X.confirm=i=>Ee("ConfirmPrompt",i);X.list=i=>{let e=i.separator||",";return Ee("TextPrompt",i,{onSubmit:r=>r.split(e).map(n=>n.trim())})};X.toggle=i=>Ee("TogglePrompt",i);X.select=i=>Ee("SelectPrompt",i);X.multiselect=i=>{i.choices=[].concat(i.choices||[]);let e=r=>r.filter(n=>n.selected).map(n=>n.value);return Ee("MultiselectPrompt",i,{onAbort:e,onSubmit:e})};X.autocompleteMultiselect=i=>{i.choices=[].concat(i.choices||[]);let e=r=>r.filter(n=>n.selected).map(n=>n.value);return Ee("AutocompleteMultiselectPrompt",i,{onAbort:e,onSubmit:e})};var ig=(i,e)=>Promise.resolve(e.filter(r=>r.title.slice(0,i.length).toLowerCase()===i.toLowerCase()));X.autocomplete=i=>(i.suggest=i.suggest||ig,i.choices=[].concat(i.choices||[]),Ee("AutocompletePrompt",i))});var qh=w((zy,Dh)=>{"use strict";var Cn=Ph(),sg=["suggest","format","onState","validate","onRender","type"],Oh=()=>{};async function rt(i=[],{onSubmit:e=Oh,onCancel:r=Oh}={}){let n={},a=rt.he||{};i=[].concat(i);let u,l,d,f,p,A,R=async(S,b,y=!1)=>{if(!(!y&&S.validate&&S.validate(b)!==!0))return S.format?await S.format(b,n):b};for(l of i)if({name:f,type:p}=l,typeof p=="function"&&(p=await p(u,{...n},l),l.type=p),!!p){for(let S in l){if(sg.includes(S))continue;let b=l[S];l[S]=typeof b=="function"?await b(u,{...n},A):b}if(A=l,typeof l.message!="string")throw new Error("prompt message is required");if({name:f,type:p}=l,Cn[p]===void 0)throw new Error(`prompt type (${p}) is not defined`);if(a[l.name]!==void 0&&(u=await R(l,a[l.name]),u!==void 0)){n[f]=u;continue}try{u=rt.I?ng(rt.I,l.initial):await Cn[p](l),n[f]=u=await R(l,u,!0),d=await e(l,u,n)}catch(S){d=!await r(l,n)}if(d)return n}return n}function ng(i,e){let r=i.shift();if(r instanceof Error)throw r;return r===void 0?e:r}function og(i){rt.I=(rt.I||[]).concat(i)}function ag(i){rt.he=Object.assign({},i)}Dh.exports=Object.assign(rt,{prompt:rt,prompts:Cn,inject:og,override:ag})});var Mh=w((Hy,Ih)=>{function ug(i){i=(Array.isArray(i)?i:i.split(".")).map(Number);let e=0,r=process.versions.node.split(".").map(Number);for(;e<i.length;e++){if(r[e]>i[e])return!1;if(i[e]>r[e])return!0}return!1}Ih.exports=ug("8.6.0")?il():qh()});var kh=w((wi,$h)=>{(function(i,e){typeof wi=="object"&&typeof $h!="undefined"?e(wi):typeof define=="function"&&define.amd?define(["exports"],e):(i=typeof globalThis!="undefined"?globalThis:i||self,e(i.WebStreamsPolyfill={}))})(wi,function(i){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:t=>`Symbol(${t})`;function r(){}function n(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}let a=n();function u(t){return typeof t=="object"&&t!==null||typeof t=="function"}let l=r,d=Promise,f=Promise.prototype.then,p=Promise.resolve.bind(d),A=Promise.reject.bind(d);function R(t){return new d(t)}function S(t){return p(t)}function b(t){return A(t)}function y(t,s,o){return f.call(t,s,o)}function M(t,s,o){y(y(t,s,o),void 0,l)}function x(t,s){M(t,s)}function E(t,s){M(t,void 0,s)}function $(t,s,o){return y(t,s,o)}function Y(t){y(t,void 0,l)}let D=(()=>{let t=a&&a.queueMicrotask;if(typeof t=="function")return t;let s=S(void 0);return o=>y(s,o)})();function z(t,s,o){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,s,o)}function L(t,s,o){try{return S(z(t,s,o))}catch(h){return b(h)}}let He=16384;class ie{constructor(){this.V=0,this.se=0,this.Y={M:[],G:void 0},this.be=this.Y,this.V=0,this.se=0}get length(){return this.se}push(s){let o=this.be,h=o;o.M.length===He-1&&(h={M:[],G:void 0}),o.M.push(s),h!==o&&(this.be=h,o.G=h),++this.se}shift(){let s=this.Y,o=s,h=this.V,c=h+1,m=s.M,g=m[h];return c===He&&(o=s.G,c=0),--this.se,this.V=c,s!==o&&(this.Y=o),m[h]=void 0,g}forEach(s){let o=this.V,h=this.Y,c=h.M;for(;(o!==c.length||h.G!==void 0)&&!(o===c.length&&(h=h.G,c=h.M,o=0,c.length===0));)s(c[o]),++o}peek(){let s=this.Y,o=this.V;return s.M[o]}}function Bn(t,s){t.h=s,s.u=t,s.t==="readable"?Mi(t):s.t==="closed"?wc(t):_n(t,s.i)}function Ii(t,s){let o=t.h;return fe(o,s)}function Ae(t){t.h.t==="readable"?Li(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Sc(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t.h.u=void 0,t.h=void 0}function yt(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Mi(t){t.w=R((s,o)=>{t.E=s,t.x=o})}function _n(t,s){Mi(t),Li(t,s)}function wc(t){Mi(t),Fn(t)}function Li(t,s){t.x!==void 0&&(Y(t.w),t.x(s),t.E=void 0,t.x=void 0)}function Sc(t,s){_n(t,s)}function Fn(t){t.E!==void 0&&(t.E(void 0),t.E=void 0,t.x=void 0)}let Wn=e("[[AbortSteps]]"),jn=e("[[ErrorSteps]]"),$i=e("[[CancelSteps]]"),ki=e("[[PullSteps]]"),Un=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},vc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function Tc(t){return typeof t=="object"||typeof t=="function"}function Pe(t,s){if(t!==void 0&&!Tc(t))throw new TypeError(`${s} is not an object.`)}function ce(t,s){if(typeof t!="function")throw new TypeError(`${s} is not a function.`)}function Rc(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Nn(t,s){if(!Rc(t))throw new TypeError(`${s} is not an object.`)}function Oe(t,s,o){if(t===void 0)throw new TypeError(`Parameter ${s} is required in '${o}'.`)}function Bi(t,s,o){if(t===void 0)throw new TypeError(`${s} is required in '${o}'.`)}function _i(t){return Number(t)}function zn(t){return t===0?0:t}function Ec(t){return zn(vc(t))}function Hn(t,s){let h=Number.MAX_SAFE_INTEGER,c=Number(t);if(c=zn(c),!Un(c))throw new TypeError(`${s} is not a finite number`);if(c=Ec(c),c<0||c>h)throw new TypeError(`${s} is outside the accepted range of ${0} to ${h}, inclusive`);return!Un(c)||c===0?0:c}function Fi(t,s){if(!Ke(t))throw new TypeError(`${s} is not a ReadableStream.`)}function wt(t){return new jt(t)}function Vn(t,s){t.u.O.push(s)}function Wi(t,s,o){let c=t.u.O.shift();o?c.m():c.S(s)}function xr(t){return t.u.O.length}function Yn(t){let s=t.u;return!(s===void 0||!Ve(s))}class jt{constructor(s){if(Oe(s,1,"ReadableStreamDefaultReader"),Fi(s,"First parameter"),Je(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Bn(this,s),this.O=new ie}get closed(){return Ve(this)?this.w:b(Cr("closed"))}cancel(s=void 0){return Ve(this)?this.h===void 0?b(yt("cancel")):Ii(this,s):b(Cr("cancel"))}read(){if(!Ve(this))return b(Cr("read"));if(this.h===void 0)return b(yt("read from"));let s,o,h=R((m,g)=>{s=m,o=g});return Ut(this,{S:m=>s({value:m,done:!1}),m:()=>s({value:void 0,done:!0}),g:m=>o(m)}),h}releaseLock(){if(!Ve(this))throw Cr("releaseLock");if(this.h!==void 0){if(this.O.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ae(this)}}}Object.defineProperties(jt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(jt.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ve(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readRequests")?!1:t instanceof jt}function Ut(t,s){let o=t.h;o.ne=!0,o.t==="closed"?s.m():o.t==="errored"?s.g(o.i):o.r[ki](s)}function Cr(t){return new TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}let Gn=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Qn{constructor(s,o){this.C=void 0,this.Q=!1,this.u=s,this.Ce=o}next(){let s=()=>this.Ae();return this.C=this.C?$(this.C,s,s):s(),this.C}return(s){let o=()=>this.Pe(s);return this.C?$(this.C,o,o):o()}Ae(){if(this.Q)return Promise.resolve({value:void 0,done:!0});let s=this.u;if(s.h===void 0)return b(yt("iterate"));let o,h,c=R((g,v)=>{o=g,h=v});return Ut(s,{S:g=>{this.C=void 0,D(()=>o({value:g,done:!1}))},m:()=>{this.C=void 0,this.Q=!0,Ae(s),o({value:void 0,done:!0})},g:g=>{this.C=void 0,this.Q=!0,Ae(s),h(g)}}),c}Pe(s){if(this.Q)return Promise.resolve({value:s,done:!0});this.Q=!0;let o=this.u;if(o.h===void 0)return b(yt("finish iterating"));if(!this.Ce){let h=Ii(o,s);return Ae(o),$(h,()=>({value:s,done:!0}))}return Ae(o),S({value:s,done:!0})}}let Kn={next(){return Jn(this)?this.ce.next():b(Zn("next"))},return(t){return Jn(this)?this.ce.return(t):b(Zn("return"))}};Gn!==void 0&&Object.setPrototypeOf(Kn,Gn);function xc(t,s){let o=wt(t),h=new Qn(o,s),c=Object.create(Kn);return c.ce=h,c}function Jn(t){if(!u(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t.ce instanceof Qn}catch(s){return!1}}function Zn(t){return new TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}let Xn=Number.isNaN||function(t){return t!==t};function Nt(t){return t.slice()}function eo(t,s,o,h,c){new Uint8Array(t).set(new Uint8Array(o,h,c),s)}function Jg(t){return t}function Ar(t){return!1}function to(t,s,o){if(t.slice)return t.slice(s,o);let h=o-s,c=new ArrayBuffer(h);return eo(c,0,t,s,h),c}function Cc(t){return!(typeof t!="number"||Xn(t)||t<0)}function ro(t){let s=to(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(s)}function ji(t){let s=t.c.shift();return t.a-=s.size,t.a<0&&(t.a=0),s.value}function Ui(t,s,o){if(!Cc(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.c.push({value:s,size:o}),t.a+=o}function Ac(t){return t.c.peek().value}function Ye(t){t.c=new ie,t.a=0}class zt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Ni(this))throw Yi("view");return this.K}respond(s){if(!Ni(this))throw Yi("respond");if(Oe(s,1,"respond"),s=Hn(s,"First parameter"),this.J===void 0)throw new TypeError("This BYOB request has been invalidated");Ar(this.K.buffer),Ir(this.J,s)}respondWithNewView(s){if(!Ni(this))throw Yi("respondWithNewView");if(Oe(s,1,"respondWithNewView"),!ArrayBuffer.isView(s))throw new TypeError("You can only respond with array buffer views");if(this.J===void 0)throw new TypeError("This BYOB request has been invalidated");Ar(s.buffer),Mr(this.J,s)}}Object.defineProperties(zt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class St{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!st(this))throw Vt("byobRequest");return Vi(this)}get desiredSize(){if(!st(this))throw Vt("desiredSize");return ho(this)}close(){if(!st(this))throw Vt("close");if(this.b)throw new TypeError("The stream has already been closed; do not close it again!");let s=this.l.t;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be closed`);Ht(this)}enqueue(s){if(!st(this))throw Vt("enqueue");if(Oe(s,1,"enqueue"),!ArrayBuffer.isView(s))throw new TypeError("chunk must be an array buffer view");if(s.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(s.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this.b)throw new TypeError("stream is closed or draining");let o=this.l.t;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);qr(this,s)}error(s=void 0){if(!st(this))throw Vt("error");de(this,s)}[$i](s){io(this),Ye(this);let o=this.Z(s);return Dr(this),o}[ki](s){let o=this.l;if(this.a>0){let c=this.c.shift();this.a-=c.byteLength,ao(this);let m=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);s.S(m);return}let h=this.Oe;if(h!==void 0){let c;try{c=new ArrayBuffer(h)}catch(g){s.g(g);return}let m={buffer:c,bufferByteLength:h,byteOffset:0,byteLength:h,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this.o.push(m)}Vn(o,s),nt(this)}}Object.defineProperties(St.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(St.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function st(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")?!1:t instanceof St}function Ni(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")?!1:t instanceof zt}function nt(t){if(!qc(t))return;if(t.L){t.$=!0;return}t.L=!0;let o=t.X();M(o,()=>{t.L=!1,t.$&&(t.$=!1,nt(t))},h=>{de(t,h)})}function io(t){Hi(t),t.o=new ie}function zi(t,s){let o=!1;t.t==="closed"&&(o=!0);let h=so(s);s.readerType==="default"?Wi(t,h,o):Lc(t,h,o)}function so(t){let s=t.bytesFilled,o=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,s/o)}function Pr(t,s,o,h){t.c.push({buffer:s,byteOffset:o,byteLength:h}),t.a+=h}function no(t,s){let o=s.elementSize,h=s.bytesFilled-s.bytesFilled%o,c=Math.min(t.a,s.byteLength-s.bytesFilled),m=s.bytesFilled+c,g=m-m%o,v=c,C=!1;g>h&&(v=g-s.bytesFilled,C=!0);let O=t.c;for(;v>0;){let q=O.peek(),I=Math.min(v,q.byteLength),H=s.byteOffset+s.bytesFilled;eo(s.buffer,H,q.buffer,q.byteOffset,I),q.byteLength===I?O.shift():(q.byteOffset+=I,q.byteLength-=I),t.a-=I,oo(t,I,s),v-=I}return C}function oo(t,s,o){o.bytesFilled+=s}function ao(t){t.a===0&&t.b?(Dr(t),er(t.l)):nt(t)}function Hi(t){t.k!==null&&(t.k.J=void 0,t.k.K=null,t.k=null)}function uo(t){for(;t.o.length>0;){if(t.a===0)return;let s=t.o.peek();no(t,s)&&(Or(t),zi(t.l,s))}}function Pc(t,s,o){let h=t.l,c=1;s.constructor!==DataView&&(c=s.constructor.BYTES_PER_ELEMENT);let m=s.constructor,g=s.buffer,v={buffer:g,bufferByteLength:g.byteLength,byteOffset:s.byteOffset,byteLength:s.byteLength,bytesFilled:0,elementSize:c,viewConstructor:m,readerType:"byob"};if(t.o.length>0){t.o.push(v),po(h,o);return}if(h.t==="closed"){let C=new m(v.buffer,v.byteOffset,0);o.m(C);return}if(t.a>0){if(no(t,v)){let C=so(v);ao(t),o.S(C);return}if(t.b){let C=new TypeError("Insufficient bytes to fill elements in the given buffer");de(t,C),o.g(C);return}}t.o.push(v),po(h,o),nt(t)}function Oc(t,s){let o=t.l;if(Gi(o))for(;mo(o)>0;){let h=Or(t);zi(o,h)}}function Dc(t,s,o){if(oo(t,s,o),o.bytesFilled<o.elementSize)return;Or(t);let h=o.bytesFilled%o.elementSize;if(h>0){let c=o.byteOffset+o.bytesFilled,m=to(o.buffer,c-h,c);Pr(t,m,0,m.byteLength)}o.bytesFilled-=h,zi(t.l,o),uo(t)}function lo(t,s){let o=t.o.peek();Hi(t),t.l.t==="closed"?Oc(t):Dc(t,s,o),nt(t)}function Or(t){return t.o.shift()}function qc(t){let s=t.l;return s.t!=="readable"||t.b||!t.v?!1:!!(Yn(s)&&xr(s)>0||Gi(s)&&mo(s)>0||ho(t)>0)}function Dr(t){t.X=void 0,t.Z=void 0}function Ht(t){let s=t.l;if(!(t.b||s.t!=="readable")){if(t.a>0){t.b=!0;return}if(t.o.length>0&&t.o.peek().bytesFilled>0){let h=new TypeError("Insufficient bytes to fill elements in the given buffer");throw de(t,h),h}Dr(t),er(s)}}function qr(t,s){let o=t.l;if(t.b||o.t!=="readable")return;let h=s.buffer,c=s.byteOffset,m=s.byteLength,g=h;if(t.o.length>0){let v=t.o.peek();Ar(v.buffer),v.buffer=v.buffer}if(Hi(t),Yn(o))if(xr(o)===0)Pr(t,g,c,m);else{t.o.length>0&&Or(t);let v=new Uint8Array(g,c,m);Wi(o,v,!1)}else Gi(o)?(Pr(t,g,c,m),uo(t)):Pr(t,g,c,m);nt(t)}function de(t,s){let o=t.l;o.t==="readable"&&(io(t),Ye(t),Dr(t),Fo(o,s))}function Vi(t){if(t.k===null&&t.o.length>0){let s=t.o.peek(),o=new Uint8Array(s.buffer,s.byteOffset+s.bytesFilled,s.byteLength-s.bytesFilled),h=Object.create(zt.prototype);Mc(h,t,o),t.k=h}return t.k}function ho(t){let s=t.l.t;return s==="errored"?null:s==="closed"?0:t.ee-t.a}function Ir(t,s){let o=t.o.peek();if(t.l.t==="closed"){if(s!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(s===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+s>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=o.buffer,lo(t,s)}function Mr(t,s){let o=t.o.peek();if(t.l.t==="closed"){if(s.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(s.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==s.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==s.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+s.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=s.byteLength;o.buffer=s.buffer,lo(t,c)}function co(t,s,o,h,c,m,g){s.l=t,s.$=!1,s.L=!1,s.k=null,s.c=s.a=void 0,Ye(s),s.b=!1,s.v=!1,s.ee=m,s.X=h,s.Z=c,s.Oe=g,s.o=new ie,t.r=s;let v=o();M(S(v),()=>{s.v=!0,nt(s)},C=>{de(s,C)})}function Ic(t,s,o){let h=Object.create(St.prototype),c=()=>{},m=()=>S(void 0),g=()=>S(void 0);s.start!==void 0&&(c=()=>s.start(h)),s.pull!==void 0&&(m=()=>s.pull(h)),s.cancel!==void 0&&(g=C=>s.cancel(C));let v=s.autoAllocateChunkSize;if(v===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");co(t,h,c,m,g,o,v)}function Mc(t,s,o){t.J=s,t.K=o}function Yi(t){return new TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function Vt(t){return new TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function fo(t){return new Yt(t)}function po(t,s){t.u.D.push(s)}function Lc(t,s,o){let c=t.u.D.shift();o?c.m(s):c.S(s)}function mo(t){return t.u.D.length}function Gi(t){let s=t.u;return!(s===void 0||!ot(s))}class Yt{constructor(s){if(Oe(s,1,"ReadableStreamBYOBReader"),Fi(s,"First parameter"),Je(s))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!st(s.r))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Bn(this,s),this.D=new ie}get closed(){return ot(this)?this.w:b(Lr("closed"))}cancel(s=void 0){return ot(this)?this.h===void 0?b(yt("cancel")):Ii(this,s):b(Lr("cancel"))}read(s){if(!ot(this))return b(Lr("read"));if(!ArrayBuffer.isView(s))return b(new TypeError("view must be an array buffer view"));if(s.byteLength===0)return b(new TypeError("view must have non-zero byteLength"));if(s.buffer.byteLength===0)return b(new TypeError("view's buffer must have non-zero byteLength"));if(Ar(s.buffer),this.h===void 0)return b(yt("read from"));let o,h,c=R((g,v)=>{o=g,h=v});return go(this,s,{S:g=>o({value:g,done:!1}),m:g=>o({value:g,done:!0}),g:g=>h(g)}),c}releaseLock(){if(!ot(this))throw Lr("releaseLock");if(this.h!==void 0){if(this.D.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ae(this)}}}Object.defineProperties(Yt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function ot(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")?!1:t instanceof Yt}function go(t,s,o){let h=t.h;h.ne=!0,h.t==="errored"?o.g(h.i):Pc(h.r,s,o)}function Lr(t){return new TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function Gt(t,s){let{highWaterMark:o}=t;if(o===void 0)return s;if(Xn(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function $r(t){let{size:s}=t;return s||(()=>1)}function kr(t,s){Pe(t,s);let o=t==null?void 0:t.highWaterMark,h=t==null?void 0:t.size;return{highWaterMark:o===void 0?void 0:_i(o),size:h===void 0?void 0:$c(h,`${s} has member 'size' that`)}}function $c(t,s){return ce(t,s),o=>_i(t(o))}function kc(t,s){Pe(t,s);let o=t==null?void 0:t.abort,h=t==null?void 0:t.close,c=t==null?void 0:t.start,m=t==null?void 0:t.type,g=t==null?void 0:t.write;return{abort:o===void 0?void 0:Bc(o,t,`${s} has member 'abort' that`),close:h===void 0?void 0:_c(h,t,`${s} has member 'close' that`),start:c===void 0?void 0:Fc(c,t,`${s} has member 'start' that`),write:g===void 0?void 0:Wc(g,t,`${s} has member 'write' that`),type:m}}function Bc(t,s,o){return ce(t,o),h=>L(t,s,[h])}function _c(t,s,o){return ce(t,o),()=>L(t,s,[])}function Fc(t,s,o){return ce(t,o),h=>z(t,s,[h])}function Wc(t,s,o){return ce(t,o),(h,c)=>L(t,s,[h,c])}function bo(t,s){if(!vt(t))throw new TypeError(`${s} is not a WritableStream.`)}function jc(t){if(typeof t!="object"||t===null)return!1;try{return typeof t.aborted=="boolean"}catch(s){return!1}}let Uc=typeof AbortController=="function";function Nc(){if(Uc)return new AbortController}class Qt{constructor(s={},o={}){s===void 0?s=null:Nn(s,"First parameter");let h=kr(o,"Second parameter"),c=kc(s,"First parameter");if(wo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let g=$r(h),v=Gt(h,1);id(this,c,v,g)}get locked(){if(!vt(this))throw jr("locked");return Tt(this)}abort(s=void 0){return vt(this)?Tt(this)?b(new TypeError("Cannot abort a stream that already has a writer")):Br(this,s):b(jr("abort"))}close(){return vt(this)?Tt(this)?b(new TypeError("Cannot close a stream that already has a writer")):ye(this)?b(new TypeError("Cannot close an already-closing stream")):So(this):b(jr("close"))}getWriter(){if(!vt(this))throw jr("getWriter");return yo(this)}}Object.defineProperties(Qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function yo(t){return new Kt(t)}function zc(t,s,o,h,c=1,m=()=>1){let g=Object.create(Qt.prototype);wo(g);let v=Object.create(Rt.prototype);return Co(g,v,t,s,o,h,c,m),g}function wo(t){t.t="writable",t.i=void 0,t.q=void 0,t.T=void 0,t.oe=new ie,t.B=void 0,t.F=void 0,t.W=void 0,t.d=void 0,t.A=!1}function vt(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")?!1:t instanceof Qt}function Tt(t){return t.q!==void 0}function Br(t,s){var o;if(t.t==="closed"||t.t==="errored")return S(void 0);t.T.ye=s,(o=t.T.de)===null||o===void 0||o.abort();let h=t.t;if(h==="closed"||h==="errored")return S(void 0);if(t.d!==void 0)return t.d.we;let c=!1;h==="erroring"&&(c=!0,s=void 0);let m=R((g,v)=>{t.d={we:void 0,z:g,P:v,De:s,qe:c}});return t.d.we=m,c||Ki(t,s),m}function So(t){let s=t.t;if(s==="closed"||s==="errored")return b(new TypeError(`The stream (in ${s} state) is not in the writable state and cannot be closed`));let o=R((c,m)=>{let g={z:c,P:m};t.F=g}),h=t.q;return h!==void 0&&t.A&&s==="writable"&&ns(h),sd(t.T),o}function Hc(t){return R((o,h)=>{let c={z:o,P:h};t.oe.push(c)})}function Qi(t,s){if(t.t==="writable"){Ki(t,s);return}Ji(t)}function Ki(t,s){let o=t.T;t.t="erroring",t.i=s;let h=t.q;h!==void 0&&To(h,s),!Kc(t)&&o.v&&Ji(t)}function Ji(t){t.t="errored",t.T[jn]();let s=t.i;if(t.oe.forEach(c=>{c.P(s)}),t.oe=new ie,t.d===void 0){_r(t);return}let o=t.d;if(t.d=void 0,o.qe){o.P(s),_r(t);return}let h=t.T[Wn](o.De);M(h,()=>{o.z(),_r(t)},c=>{o.P(c),_r(t)})}function Vc(t){t.B.z(void 0),t.B=void 0}function Yc(t,s){t.B.P(s),t.B=void 0,Qi(t,s)}function Gc(t){t.W.z(void 0),t.W=void 0,t.t==="erroring"&&(t.i=void 0,t.d!==void 0&&(t.d.z(),t.d=void 0)),t.t="closed";let o=t.q;o!==void 0&&Do(o)}function Qc(t,s){t.W.P(s),t.W=void 0,t.d!==void 0&&(t.d.P(s),t.d=void 0),Qi(t,s)}function ye(t){return!(t.F===void 0&&t.W===void 0)}function Kc(t){return!(t.B===void 0&&t.W===void 0)}function Jc(t){t.W=t.F,t.F=void 0}function Zc(t){t.B=t.oe.shift()}function _r(t){t.F!==void 0&&(t.F.P(t.i),t.F=void 0);let s=t.q;s!==void 0&&is(s,t.i)}function Zi(t,s){let o=t.q;o!==void 0&&s!==t.A&&(s?cd(o):ns(o)),t.A=s}class Kt{constructor(s){if(Oe(s,1,"WritableStreamDefaultWriter"),bo(s,"First parameter"),Tt(s))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this.p=s,s.q=this;let o=s.t;if(o==="writable")!ye(s)&&s.A?Nr(this):qo(this),Ur(this);else if(o==="erroring")ss(this,s.i),Ur(this);else if(o==="closed")qo(this),ld(this);else{let h=s.i;ss(this,h),Oo(this,h)}}get closed(){return at(this)?this.w:b(ut("closed"))}get desiredSize(){if(!at(this))throw ut("desiredSize");if(this.p===void 0)throw Jt("desiredSize");return rd(this)}get ready(){return at(this)?this.fe:b(ut("ready"))}abort(s=void 0){return at(this)?this.p===void 0?b(Jt("abort")):Xc(this,s):b(ut("abort"))}close(){if(!at(this))return b(ut("close"));let s=this.p;return s===void 0?b(Jt("close")):ye(s)?b(new TypeError("Cannot close an already-closing stream")):vo(this)}releaseLock(){if(!at(this))throw ut("releaseLock");this.p!==void 0&&Ro(this)}write(s=void 0){return at(this)?this.p===void 0?b(Jt("write to")):Eo(this,s):b(ut("write"))}}Object.defineProperties(Kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kt.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function at(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")?!1:t instanceof Kt}function Xc(t,s){let o=t.p;return Br(o,s)}function vo(t){let s=t.p;return So(s)}function ed(t){let s=t.p,o=s.t;return ye(s)||o==="closed"?S(void 0):o==="errored"?b(s.i):vo(t)}function td(t,s){t.pe==="pending"?is(t,s):hd(t,s)}function To(t,s){t.me==="pending"?Io(t,s):dd(t,s)}function rd(t){let s=t.p,o=s.t;return o==="errored"||o==="erroring"?null:o==="closed"?0:Ao(s.T)}function Ro(t){let s=t.p,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");To(t,o),td(t,o),s.q=void 0,t.p=void 0}function Eo(t,s){let o=t.p,h=o.T,c=nd(h,s);if(o!==t.p)return b(Jt("write to"));let m=o.t;if(m==="errored")return b(o.i);if(ye(o)||m==="closed")return b(new TypeError("The stream is closing or closed and cannot be written to"));if(m==="erroring")return b(o.i);let g=Hc(o);return od(h,s,c),g}let xo={};class Rt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Xi(this))throw rs("abortReason");return this.ye}get signal(){if(!Xi(this))throw rs("signal");if(this.de===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this.de.signal}error(s=void 0){if(!Xi(this))throw rs("error");this.j.t==="writable"&&Po(this,s)}[Wn](s){let o=this.Se(s);return Fr(this),o}[jn](){Ye(this)}}Object.defineProperties(Rt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Xi(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")?!1:t instanceof Rt}function Co(t,s,o,h,c,m,g,v){s.j=t,t.T=s,s.c=void 0,s.a=void 0,Ye(s),s.ye=void 0,s.de=Nc(),s.v=!1,s.te=v,s.ee=g,s.ve=h,s.Te=c,s.Se=m;let C=ts(s);Zi(t,C);let O=o(),q=S(O);M(q,()=>{s.v=!0,Wr(s)},I=>{s.v=!0,Qi(t,I)})}function id(t,s,o,h){let c=Object.create(Rt.prototype),m=()=>{},g=()=>S(void 0),v=()=>S(void 0),C=()=>S(void 0);s.start!==void 0&&(m=()=>s.start(c)),s.write!==void 0&&(g=O=>s.write(O,c)),s.close!==void 0&&(v=()=>s.close()),s.abort!==void 0&&(C=O=>s.abort(O)),Co(t,c,m,g,v,C,o,h)}function Fr(t){t.ve=void 0,t.Te=void 0,t.Se=void 0,t.te=void 0}function sd(t){Ui(t,xo,0),Wr(t)}function nd(t,s){try{return t.te(s)}catch(o){return es(t,o),1}}function Ao(t){return t.ee-t.a}function od(t,s,o){try{Ui(t,s,o)}catch(c){es(t,c);return}let h=t.j;if(!ye(h)&&h.t==="writable"){let c=ts(t);Zi(h,c)}Wr(t)}function Wr(t){let s=t.j;if(!t.v||s.B!==void 0)return;if(s.t==="erroring"){Ji(s);return}if(t.c.length===0)return;let h=Ac(t);h===xo?ad(t):ud(t,h)}function es(t,s){t.j.t==="writable"&&Po(t,s)}function ad(t){let s=t.j;Jc(s),ji(t);let o=t.Te();Fr(t),M(o,()=>{Gc(s)},h=>{Qc(s,h)})}function ud(t,s){let o=t.j;Zc(o);let h=t.ve(s);M(h,()=>{Vc(o);let c=o.t;if(ji(t),!ye(o)&&c==="writable"){let m=ts(t);Zi(o,m)}Wr(t)},c=>{o.t==="writable"&&Fr(t),Yc(o,c)})}function ts(t){return Ao(t)<=0}function Po(t,s){let o=t.j;Fr(t),Ki(o,s)}function jr(t){return new TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function rs(t){return new TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function ut(t){return new TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function Jt(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Ur(t){t.w=R((s,o)=>{t.E=s,t.x=o,t.pe="pending"})}function Oo(t,s){Ur(t),is(t,s)}function ld(t){Ur(t),Do(t)}function is(t,s){t.x!==void 0&&(Y(t.w),t.x(s),t.E=void 0,t.x=void 0,t.pe="rejected")}function hd(t,s){Oo(t,s)}function Do(t){t.E!==void 0&&(t.E(void 0),t.E=void 0,t.x=void 0,t.pe="resolved")}function Nr(t){t.fe=R((s,o)=>{t.ae=s,t.ue=o}),t.me="pending"}function ss(t,s){Nr(t),Io(t,s)}function qo(t){Nr(t),ns(t)}function Io(t,s){t.ue!==void 0&&(Y(t.fe),t.ue(s),t.ae=void 0,t.ue=void 0,t.me="rejected")}function cd(t){Nr(t)}function dd(t,s){ss(t,s)}function ns(t){t.ae!==void 0&&(t.ae(void 0),t.ae=void 0,t.ue=void 0,t.me="fulfilled")}let Mo=typeof DOMException!="undefined"?DOMException:void 0;function fd(t){if(!(typeof t=="function"||typeof t=="object"))return!1;try{return new t,!0}catch(s){return!1}}function pd(){let t=function(o,h){this.message=o||"",this.name=h||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}let md=fd(Mo)?Mo:pd();function Lo(t,s,o,h,c,m){let g=wt(t),v=yo(s);t.ne=!0;let C=!1,O=S(void 0);return R((q,I)=>{let H;if(m!==void 0){if(H=()=>{let T=new md("Aborted","AbortError"),P=[];h||P.push(()=>s.t==="writable"?Br(s,T):S(void 0)),c||P.push(()=>t.t==="readable"?fe(t,T):S(void 0)),J(()=>Promise.all(P.map(_=>_())),!0,T)},m.aborted){H();return}m.addEventListener("abort",H)}function pe(){return R((T,P)=>{function _(se){se?T():y(Ct(),_,P)}_(!1)})}function Ct(){return C?S(!0):y(v.fe,()=>R((T,P)=>{Ut(g,{S:_=>{O=y(Eo(v,_),void 0,r),T(!1)},m:()=>T(!0),g:P})}))}if(De(t,g.w,T=>{h?ue(!0,T):J(()=>Br(s,T),!0,T)}),De(s,v.w,T=>{c?ue(!0,T):J(()=>fe(t,T),!0,T)}),Q(t,g.w,()=>{o?ue():J(()=>ed(v))}),ye(s)||s.t==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?ue(!0,T):J(()=>fe(t,T),!0,T)}Y(pe());function Ze(){let T=O;return y(O,()=>T!==O?Ze():void 0)}function De(T,P,_){T.t==="errored"?_(T.i):E(P,_)}function Q(T,P,_){T.t==="closed"?_():x(P,_)}function J(T,P,_){if(C)return;C=!0,s.t==="writable"&&!ye(s)?x(Ze(),se):se();function se(){M(T(),()=>qe(P,_),At=>qe(!0,At))}}function ue(T,P){C||(C=!0,s.t==="writable"&&!ye(s)?x(Ze(),()=>qe(T,P)):qe(T,P))}function qe(T,P){Ro(v),Ae(g),m!==void 0&&m.removeEventListener("abort",H),T?I(P):q(void 0)}})}class Et{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!zr(this))throw Yr("desiredSize");return os(this)}close(){if(!zr(this))throw Yr("close");if(!xt(this))throw new TypeError("The stream is not in a state that permits close");Xt(this)}enqueue(s=void 0){if(!zr(this))throw Yr("enqueue");if(!xt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Vr(this,s)}error(s=void 0){if(!zr(this))throw Yr("error");Ge(this,s)}[$i](s){Ye(this);let o=this.Z(s);return Hr(this),o}[ki](s){let o=this.U;if(this.c.length>0){let h=ji(this);this.b&&this.c.length===0?(Hr(this),er(o)):Zt(this),s.S(h)}else Vn(o,s),Zt(this)}}Object.defineProperties(Et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function zr(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")?!1:t instanceof Et}function Zt(t){if(!$o(t))return;if(t.L){t.$=!0;return}t.L=!0;let o=t.X();M(o,()=>{t.L=!1,t.$&&(t.$=!1,Zt(t))},h=>{Ge(t,h)})}function $o(t){let s=t.U;return!xt(t)||!t.v?!1:!!(Je(s)&&xr(s)>0||os(t)>0)}function Hr(t){t.X=void 0,t.Z=void 0,t.te=void 0}function Xt(t){if(!xt(t))return;let s=t.U;t.b=!0,t.c.length===0&&(Hr(t),er(s))}function Vr(t,s){if(!xt(t))return;let o=t.U;if(Je(o)&&xr(o)>0)Wi(o,s,!1);else{let h;try{h=t.te(s)}catch(c){throw Ge(t,c),c}try{Ui(t,s,h)}catch(c){throw Ge(t,c),c}}Zt(t)}function Ge(t,s){let o=t.U;o.t==="readable"&&(Ye(t),Hr(t),Fo(o,s))}function os(t){let s=t.U.t;return s==="errored"?null:s==="closed"?0:t.ee-t.a}function gd(t){return!$o(t)}function xt(t){let s=t.U.t;return!t.b&&s==="readable"}function ko(t,s,o,h,c,m,g){s.U=t,s.c=void 0,s.a=void 0,Ye(s),s.v=!1,s.b=!1,s.$=!1,s.L=!1,s.te=g,s.ee=m,s.X=h,s.Z=c,t.r=s;let v=o();M(S(v),()=>{s.v=!0,Zt(s)},C=>{Ge(s,C)})}function bd(t,s,o,h){let c=Object.create(Et.prototype),m=()=>{},g=()=>S(void 0),v=()=>S(void 0);s.start!==void 0&&(m=()=>s.start(c)),s.pull!==void 0&&(g=()=>s.pull(c)),s.cancel!==void 0&&(v=C=>s.cancel(C)),ko(t,c,m,g,v,o,h)}function Yr(t){return new TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function yd(t,s){return st(t.r)?Sd(t):wd(t)}function wd(t,s){let o=wt(t),h=!1,c=!1,m=!1,g=!1,v,C,O,q,I,H=R(Q=>{I=Q});function pe(){return h?(c=!0,S(void 0)):(h=!0,Ut(o,{S:J=>{D(()=>{c=!1;let ue=J,qe=J;m||Vr(O.r,ue),g||Vr(q.r,qe),h=!1,c&&pe()})},m:()=>{h=!1,m||Xt(O.r),g||Xt(q.r),(!m||!g)&&I(void 0)},g:()=>{h=!1}}),S(void 0))}function Ct(Q){if(m=!0,v=Q,g){let J=Nt([v,C]),ue=fe(t,J);I(ue)}return H}function Ze(Q){if(g=!0,C=Q,m){let J=Nt([v,C]),ue=fe(t,J);I(ue)}return H}function De(){}return O=as(De,pe,Ct),q=as(De,pe,Ze),E(o.w,Q=>{Ge(O.r,Q),Ge(q.r,Q),(!m||!g)&&I(void 0)}),[O,q]}function Sd(t){let s=wt(t),o=!1,h=!1,c=!1,m=!1,g=!1,v,C,O,q,I,H=R(T=>{I=T});function pe(T){E(T.w,P=>{T===s&&(de(O.r,P),de(q.r,P),(!m||!g)&&I(void 0))})}function Ct(){ot(s)&&(Ae(s),s=wt(t),pe(s)),Ut(s,{S:P=>{D(()=>{h=!1,c=!1;let _=P,se=P;if(!m&&!g)try{se=ro(P)}catch(At){de(O.r,At),de(q.r,At),I(fe(t,At));return}m||qr(O.r,_),g||qr(q.r,se),o=!1,h?De():c&&Q()})},m:()=>{o=!1,m||Ht(O.r),g||Ht(q.r),O.r.o.length>0&&Ir(O.r,0),q.r.o.length>0&&Ir(q.r,0),(!m||!g)&&I(void 0)},g:()=>{o=!1}})}function Ze(T,P){Ve(s)&&(Ae(s),s=fo(t),pe(s));let _=P?q:O,se=P?O:q;go(s,T,{S:Pt=>{D(()=>{h=!1,c=!1;let Ot=P?g:m;if(P?m:g)Ot||Mr(_.r,Pt);else{let Zo;try{Zo=ro(Pt)}catch(ls){de(_.r,ls),de(se.r,ls),I(fe(t,ls));return}Ot||Mr(_.r,Pt),qr(se.r,Zo)}o=!1,h?De():c&&Q()})},m:Pt=>{o=!1;let Ot=P?g:m,ri=P?m:g;Ot||Ht(_.r),ri||Ht(se.r),Pt!==void 0&&(Ot||Mr(_.r,Pt),!ri&&se.r.o.length>0&&Ir(se.r,0)),(!Ot||!ri)&&I(void 0)},g:()=>{o=!1}})}function De(){if(o)return h=!0,S(void 0);o=!0;let T=Vi(O.r);return T===null?Ct():Ze(T.K,!1),S(void 0)}function Q(){if(o)return c=!0,S(void 0);o=!0;let T=Vi(q.r);return T===null?Ct():Ze(T.K,!0),S(void 0)}function J(T){if(m=!0,v=T,g){let P=Nt([v,C]),_=fe(t,P);I(_)}return H}function ue(T){if(g=!0,C=T,m){let P=Nt([v,C]),_=fe(t,P);I(_)}return H}function qe(){}return O=_o(qe,De,J),q=_o(qe,Q,ue),pe(s),[O,q]}function vd(t,s){Pe(t,s);let o=t,h=o==null?void 0:o.autoAllocateChunkSize,c=o==null?void 0:o.cancel,m=o==null?void 0:o.pull,g=o==null?void 0:o.start,v=o==null?void 0:o.type;return{autoAllocateChunkSize:h===void 0?void 0:Hn(h,`${s} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Td(c,o,`${s} has member 'cancel' that`),pull:m===void 0?void 0:Rd(m,o,`${s} has member 'pull' that`),start:g===void 0?void 0:Ed(g,o,`${s} has member 'start' that`),type:v===void 0?void 0:xd(v,`${s} has member 'type' that`)}}function Td(t,s,o){return ce(t,o),h=>L(t,s,[h])}function Rd(t,s,o){return ce(t,o),h=>L(t,s,[h])}function Ed(t,s,o){return ce(t,o),h=>z(t,s,[h])}function xd(t,s){if(t=`${t}`,t!=="bytes")throw new TypeError(`${s} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}function Cd(t,s){Pe(t,s);let o=t==null?void 0:t.mode;return{mode:o===void 0?void 0:Ad(o,`${s} has member 'mode' that`)}}function Ad(t,s){if(t=`${t}`,t!=="byob")throw new TypeError(`${s} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}function Pd(t,s){Pe(t,s);let o=t==null?void 0:t.preventCancel;return{preventCancel:Boolean(o)}}function Bo(t,s){Pe(t,s);let o=t==null?void 0:t.preventAbort,h=t==null?void 0:t.preventCancel,c=t==null?void 0:t.preventClose,m=t==null?void 0:t.signal;return m!==void 0&&Od(m,`${s} has member 'signal' that`),{preventAbort:Boolean(o),preventCancel:Boolean(h),preventClose:Boolean(c),signal:m}}function Od(t,s){if(!jc(t))throw new TypeError(`${s} is not an AbortSignal.`)}function Dd(t,s){Pe(t,s);let o=t==null?void 0:t.readable;Bi(o,"readable","ReadableWritablePair"),Fi(o,`${s} has member 'readable' that`);let h=t==null?void 0:t.writable;return Bi(h,"writable","ReadableWritablePair"),bo(h,`${s} has member 'writable' that`),{readable:o,writable:h}}class Qe{constructor(s={},o={}){s===void 0?s=null:Nn(s,"First parameter");let h=kr(o,"Second parameter"),c=vd(s,"First parameter");if(us(this),c.type==="bytes"){if(h.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let m=Gt(h,0);Ic(this,c,m)}else{let m=$r(h),g=Gt(h,1);bd(this,c,g,m)}}get locked(){if(!Ke(this))throw lt("locked");return Je(this)}cancel(s=void 0){return Ke(this)?Je(this)?b(new TypeError("Cannot cancel a stream that already has a reader")):fe(this,s):b(lt("cancel"))}getReader(s=void 0){if(!Ke(this))throw lt("getReader");return Cd(s,"First parameter").mode===void 0?wt(this):fo(this)}pipeThrough(s,o={}){if(!Ke(this))throw lt("pipeThrough");Oe(s,1,"pipeThrough");let h=Dd(s,"First parameter"),c=Bo(o,"Second parameter");if(Je(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Tt(h.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let m=Lo(this,h.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return Y(m),h.readable}pipeTo(s,o={}){if(!Ke(this))return b(lt("pipeTo"));if(s===void 0)return b("Parameter 1 is required in 'pipeTo'.");if(!vt(s))return b(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let h;try{h=Bo(o,"Second parameter")}catch(c){return b(c)}return Je(this)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Tt(s)?b(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Lo(this,s,h.preventClose,h.preventAbort,h.preventCancel,h.signal)}tee(){if(!Ke(this))throw lt("tee");let s=yd(this);return Nt(s)}values(s=void 0){if(!Ke(this))throw lt("values");let o=Pd(s,"First parameter");return xc(this,o.preventCancel)}}Object.defineProperties(Qe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(Qe.prototype,e.asyncIterator,{value:Qe.prototype.values,writable:!0,configurable:!0});function as(t,s,o,h=1,c=()=>1){let m=Object.create(Qe.prototype);us(m);let g=Object.create(Et.prototype);return ko(m,g,t,s,o,h,c),m}function _o(t,s,o){let h=Object.create(Qe.prototype);us(h);let c=Object.create(St.prototype);return co(h,c,t,s,o,0,void 0),h}function us(t){t.t="readable",t.u=void 0,t.i=void 0,t.ne=!1}function Ke(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")?!1:t instanceof Qe}function Je(t){return t.u!==void 0}function fe(t,s){if(t.ne=!0,t.t==="closed")return S(void 0);if(t.t==="errored")return b(t.i);er(t);let o=t.u;o!==void 0&&ot(o)&&(o.D.forEach(c=>{c.m(void 0)}),o.D=new ie);let h=t.r[$i](s);return $(h,r)}function er(t){t.t="closed";let s=t.u;s!==void 0&&(Fn(s),Ve(s)&&(s.O.forEach(o=>{o.m()}),s.O=new ie))}function Fo(t,s){t.t="errored",t.i=s;let o=t.u;o!==void 0&&(Li(o,s),Ve(o)?(o.O.forEach(h=>{h.g(s)}),o.O=new ie):(o.D.forEach(h=>{h.g(s)}),o.D=new ie))}function lt(t){return new TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}function Wo(t,s){Pe(t,s);let o=t==null?void 0:t.highWaterMark;return Bi(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:_i(o)}}let jo=t=>t.byteLength;Object.defineProperty(jo,"name",{value:"size",configurable:!0});class Gr{constructor(s){Oe(s,1,"ByteLengthQueuingStrategy"),s=Wo(s,"First parameter"),this.Ie=s.highWaterMark}get highWaterMark(){if(!No(this))throw Uo("highWaterMark");return this.Ie}get size(){if(!No(this))throw Uo("size");return jo}}Object.defineProperties(Gr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Gr.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Uo(t){return new TypeError(`ByteLengthQueuingStrategy.prototype.${t} can only be used on a ByteLengthQueuingStrategy`)}function No(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")?!1:t instanceof Gr}let zo=()=>1;Object.defineProperty(zo,"name",{value:"size",configurable:!0});class Qr{constructor(s){Oe(s,1,"CountQueuingStrategy"),s=Wo(s,"First parameter"),this.Me=s.highWaterMark}get highWaterMark(){if(!Vo(this))throw Ho("highWaterMark");return this.Me}get size(){if(!Vo(this))throw Ho("size");return zo}}Object.defineProperties(Qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qr.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ho(t){return new TypeError(`CountQueuingStrategy.prototype.${t} can only be used on a CountQueuingStrategy`)}function Vo(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")?!1:t instanceof Qr}function qd(t,s){Pe(t,s);let o=t==null?void 0:t.flush,h=t==null?void 0:t.readableType,c=t==null?void 0:t.start,m=t==null?void 0:t.transform,g=t==null?void 0:t.writableType;return{flush:o===void 0?void 0:Id(o,t,`${s} has member 'flush' that`),readableType:h,start:c===void 0?void 0:Md(c,t,`${s} has member 'start' that`),transform:m===void 0?void 0:Ld(m,t,`${s} has member 'transform' that`),writableType:g}}function Id(t,s,o){return ce(t,o),h=>L(t,s,[h])}function Md(t,s,o){return ce(t,o),h=>z(t,s,[h])}function Ld(t,s,o){return ce(t,o),(h,c)=>L(t,s,[h,c])}class Kr{constructor(s={},o={},h={}){s===void 0&&(s=null);let c=kr(o,"Second parameter"),m=kr(h,"Third parameter"),g=qd(s,"First parameter");if(g.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(g.writableType!==void 0)throw new RangeError("Invalid writableType specified");let v=Gt(m,0),C=$r(m),O=Gt(c,1),q=$r(c),I,H=R(pe=>{I=pe});$d(this,H,O,q,v,C),Bd(this,g),g.start!==void 0?I(g.start(this.re)):I(void 0)}get readable(){if(!Yo(this))throw Jo("readable");return this.N}get writable(){if(!Yo(this))throw Jo("writable");return this.ge}}Object.defineProperties(Kr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function $d(t,s,o,h,c,m){function g(){return s}function v(H){return Wd(t,H)}function C(H){return jd(t,H)}function O(){return Ud(t)}t.ge=zc(g,v,O,C,o,h);function q(){return Nd(t)}function I(H){return Zr(t,H),S(void 0)}t.N=as(g,q,I,c,m),t.A=void 0,t.le=void 0,t.Re=void 0,Xr(t,!0),t.re=void 0}function Yo(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")?!1:t instanceof Kr}function Jr(t,s){Ge(t.N.r,s),Zr(t,s)}function Zr(t,s){Go(t.re),es(t.ge.T,s),t.A&&Xr(t,!1)}function Xr(t,s){t.le!==void 0&&t.Re(),t.le=R(o=>{t.Re=o}),t.A=s}class tr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ei(this))throw ti("desiredSize");let s=this.ie.N.r;return os(s)}enqueue(s=void 0){if(!ei(this))throw ti("enqueue");Qo(this,s)}error(s=void 0){if(!ei(this))throw ti("error");_d(this,s)}terminate(){if(!ei(this))throw ti("terminate");Fd(this)}}Object.defineProperties(tr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function ei(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")?!1:t instanceof tr}function kd(t,s,o,h){s.ie=t,t.re=s,s.Ee=o,s.xe=h}function Bd(t,s){let o=Object.create(tr.prototype),h=m=>{try{return Qo(o,m),S(void 0)}catch(g){return b(g)}},c=()=>S(void 0);s.transform!==void 0&&(h=m=>s.transform(m,o)),s.flush!==void 0&&(c=()=>s.flush(o)),kd(t,o,h,c)}function Go(t){t.Ee=void 0,t.xe=void 0}function Qo(t,s){let o=t.ie,h=o.N.r;if(!xt(h))throw new TypeError("Readable side is not in a state that permits enqueue");try{Vr(h,s)}catch(m){throw Zr(o,m),o.N.i}gd(h)!==o.A&&Xr(o,!0)}function _d(t,s){Jr(t.ie,s)}function Ko(t,s){let o=t.Ee(s);return $(o,void 0,h=>{throw Jr(t.ie,h),h})}function Fd(t){let s=t.ie,o=s.N.r;Xt(o);let h=new TypeError("TransformStream terminated");Zr(s,h)}function Wd(t,s){let o=t.re;if(t.A){let h=t.le;return $(h,()=>{let c=t.ge;if(c.t==="erroring")throw c.i;return Ko(o,s)})}return Ko(o,s)}function jd(t,s){return Jr(t,s),S(void 0)}function Ud(t){let s=t.N,o=t.re,h=o.xe();return Go(o),$(h,()=>{if(s.t==="errored")throw s.i;Xt(s.r)},c=>{throw Jr(t,c),s.i})}function Nd(t){return Xr(t,!1),t.le}function ti(t){return new TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function Jo(t){return new TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}i.ByteLengthQueuingStrategy=Gr,i.CountQueuingStrategy=Qr,i.ReadableByteStreamController=St,i.ReadableStream=Qe,i.ReadableStreamBYOBReader=Yt,i.ReadableStreamBYOBRequest=zt,i.ReadableStreamDefaultController=Et,i.ReadableStreamDefaultReader=jt,i.TransformStream=Kr,i.TransformStreamDefaultController=tr,i.WritableStream=Qt,i.WritableStreamDefaultController=Rt,i.WritableStreamDefaultWriter=Kt,Object.defineProperty(i,"__esModule",{value:!0})})});var Bh=w(()=>{if(!globalThis.ReadableStream)try{let i=require("node:process"),{emitWarning:e}=i;try{i.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),i.emitWarning=e}catch(r){throw i.emitWarning=e,r}}catch(i){Object.assign(globalThis,kh())}try{let{Blob:i}=require("buffer");i&&!i.prototype.stream&&(i.prototype.stream=function(r){let n=0,a=this;return new ReadableStream({type:"bytes",async pull(u){let d=await a.slice(n,Math.min(a.size,n+65536)).arrayBuffer();n+=d.byteLength,u.enqueue(new Uint8Array(d)),n===a.size&&u.close()}})})}catch(i){}});async function*An(i,e=!0){for(let r of i)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,a=r.byteOffset+r.byteLength;for(;n!==a;){let u=Math.min(a-n,_h),l=r.buffer.slice(n,n+u);n+=l.byteLength,yield new Uint8Array(l)}}else yield r;else{let n=0,a=r;for(;n!==a.size;){let l=await a.slice(n,Math.min(a.size,n+_h)).arrayBuffer();n+=l.byteLength,yield new Uint8Array(l)}}}var Qy,_h,We,mr,kt,Si,Bt,Fh,hg,je,gr=rr(()=>{Qy=Ie(Bh(),1);_h=65536;Fh=(Bt=class{constructor(e=[],r={}){ne(this,We,[]);ne(this,mr,"");ne(this,kt,0);ne(this,Si,"transparent");if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let u of e){let l;ArrayBuffer.isView(u)?l=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?l=new Uint8Array(u.slice(0)):u instanceof Bt?l=u:l=n.encode(`${u}`),K(this,kt,B(this,kt)+(ArrayBuffer.isView(l)?l.byteLength:l.size)),B(this,We).push(l)}K(this,Si,`${r.endings===void 0?"transparent":r.endings}`);let a=r.type===void 0?"":String(r.type);K(this,mr,/^[\x20-\x7E]*$/.test(a)?a:"")}get size(){return B(this,kt)}get type(){return B(this,mr)}async text(){let e=new TextDecoder,r="";for await(let n of An(B(this,We),!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of An(B(this,We),!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=An(B(this,We),!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:a}=this,u=e<0?Math.max(a+e,0):Math.min(e,a),l=r<0?Math.max(a+r,0):Math.min(r,a),d=Math.max(l-u,0),f=B(this,We),p=[],A=0;for(let S of f){if(A>=d)break;let b=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&b<=u)u-=b,l-=b;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(b,l)),A+=y.byteLength):(y=S.slice(u,Math.min(b,l)),A+=y.size),l-=b,p.push(y),u=0}}let R=new Bt([],{type:String(n).toLowerCase()});return K(R,kt,d),K(R,We,p),R}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},We=new WeakMap,mr=new WeakMap,kt=new WeakMap,Si=new WeakMap,Bt);Object.defineProperties(Fh.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});hg=Fh,je=hg});var br,yr,Wh,cg,dg,_t,Pn=rr(()=>{gr();cg=(Wh=class extends je{constructor(r,n,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,a);ne(this,br,0);ne(this,yr,"");a===null&&(a={});let u=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(u)||K(this,br,u),K(this,yr,String(n))}get name(){return B(this,yr)}get lastModified(){return B(this,br)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof je&&/^(File)$/.test(r[Symbol.toStringTag])}},br=new WeakMap,yr=new WeakMap,Wh),dg=cg,_t=dg});function zh(i,e=je){var r=`${jh()}${jh()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],a=`--${r}\r
Content-Disposition: form-data; name="`;return i.forEach((u,l)=>typeof u=="string"?n.push(a+On(l)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(a+On(l)+`"; filename="${On(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var wr,fg,pg,jh,mg,Uh,On,dt,le,Nh,ft,vi=rr(()=>{gr();Pn();({toStringTag:wr,iterator:fg,hasInstance:pg}=Symbol),jh=Math.random,mg="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Uh=(i,e,r)=>(i+="",/^(Blob|File)$/.test(e&&e[wr])?[(r=r!==void 0?r+"":e[wr]=="File"?e.name:"blob",i),e.name!==r||e[wr]=="blob"?new _t([e],r,e):e]:[i,e+""]),On=(i,e)=>(e?i:i.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),dt=(i,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${i}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},ft=(Nh=class{constructor(...e){ne(this,le,[]);if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[wr](){return"FormData"}[fg](){return this.entries()}static[pg](e){return e&&typeof e=="object"&&e[wr]==="FormData"&&!mg.some(r=>typeof e[r]!="function")}append(...e){dt("append",arguments,2),B(this,le).push(Uh(...e))}delete(e){dt("delete",arguments,1),e+="",K(this,le,B(this,le).filter(([r])=>r!==e))}get(e){dt("get",arguments,1),e+="";for(var r=B(this,le),n=r.length,a=0;a<n;a++)if(r[a][0]===e)return r[a][1];return null}getAll(e,r){return dt("getAll",arguments,1),r=[],e+="",B(this,le).forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return dt("has",arguments,1),e+="",B(this,le).some(r=>r[0]===e)}forEach(e,r){dt("forEach",arguments,1);for(var[n,a]of this)e.call(r,a,n,this)}set(...e){dt("set",arguments,2);var r=[],n=!0;e=Uh(...e),B(this,le).forEach(a=>{a[0]===e[0]?n&&(n=!r.push(e)):r.push(a)}),n&&r.push(e),K(this,le,r)}*entries(){yield*B(this,le)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},le=new WeakMap,Nh)});var Gh=w((uw,Yh)=>{if(!globalThis.DOMException)try{let{MessageChannel:i}=require("worker_threads"),e=new i().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(i){i.constructor.name==="DOMException"&&(globalThis.DOMException=i.constructor)}Yh.exports=globalThis.DOMException});var vr,gg,Kh,bg,pt,mt,qn,Qh,In=rr(()=>{vr=require("node:fs"),gg=require("node:path"),Kh=Ie(Gh(),1);Pn();gr();({stat:bg}=vr.promises),qn=class{constructor(e){ne(this,pt,void 0);ne(this,mt,void 0);K(this,pt,e.path),K(this,mt,e.start),this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new qn({path:B(this,pt),lastModified:this.lastModified,size:r-e,start:B(this,mt)+e})}async*stream(){let{mtimeMs:e}=await bg(B(this,pt));if(e>this.lastModified)throw new Kh.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,vr.createReadStream)(B(this,pt),{start:B(this,mt),end:B(this,mt)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},Qh=qn;pt=new WeakMap,mt=new WeakMap});var Zh={};Qd(Zh,{toFormData:()=>Eg});function Rg(i){let e=i.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(a,u)=>String.fromCharCode(u)),n}async function Eg(i,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Mn(r[1]||r[2]),a,u,l,d,f,p,A=[],R=new ft,S=E=>{l+=x.decode(E,{stream:!0})},b=E=>{A.push(E)},y=()=>{let E=new _t(A,p,{type:f});R.append(d,E)},M=()=>{R.append(d,l)},x=new TextDecoder("utf-8");x.decode(),n.onPartBegin=function(){n.onPartData=S,n.onPartEnd=M,a="",u="",l="",d="",f="",p=null,A.length=0},n.onHeaderField=function(E){a+=x.decode(E,{stream:!0})},n.onHeaderValue=function(E){u+=x.decode(E,{stream:!0})},n.onHeaderEnd=function(){if(u+=x.decode(),a=a.toLowerCase(),a==="content-disposition"){let E=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);E&&(d=E[2]||E[3]||""),p=Rg(u),p&&(n.onPartData=b,n.onPartEnd=y)}else a==="content-type"&&(f=u);u="",a=""};for await(let E of i)n.write(E);return n.end(),R}var xe,W,Jh,it,Ri,Ei,yg,Tr,wg,Sg,vg,Tg,gt,Mn,Xh=rr(()=>{In();vi();xe=0,W={START_BOUNDARY:xe++,HEADER_FIELD_START:xe++,HEADER_FIELD:xe++,HEADER_VALUE_START:xe++,HEADER_VALUE:xe++,HEADER_VALUE_ALMOST_DONE:xe++,HEADERS_ALMOST_DONE:xe++,PART_DATA_START:xe++,PART_DATA:xe++,END:xe++},Jh=1,it={PART_BOUNDARY:Jh,LAST_BOUNDARY:Jh*=2},Ri=10,Ei=13,yg=32,Tr=45,wg=58,Sg=97,vg=122,Tg=i=>i|32,gt=()=>{},Mn=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=gt,this.onHeaderField=gt,this.onHeadersEnd=gt,this.onHeaderValue=gt,this.onPartBegin=gt,this.onPartData=gt,this.onPartEnd=gt,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=W.START_BOUNDARY}write(e){let r=0,n=e.length,a=this.index,{lookbehind:u,boundary:l,boundaryChars:d,index:f,state:p,flags:A}=this,R=this.boundary.length,S=R-1,b=e.length,y,M,x=D=>{this[D+"Mark"]=r},E=D=>{delete this[D+"Mark"]},$=(D,z,L,He)=>{(z===void 0||z!==L)&&this[D](He&&He.subarray(z,L))},Y=(D,z)=>{let L=D+"Mark";L in this&&(z?($(D,this[L],r,e),delete this[L]):($(D,this[L],e.length,e),this[L]=0))};for(r=0;r<n;r++)switch(y=e[r],p){case W.START_BOUNDARY:if(f===l.length-2){if(y===Tr)A|=it.LAST_BOUNDARY;else if(y!==Ei)return;f++;break}else if(f-1===l.length-2){if(A&it.LAST_BOUNDARY&&y===Tr)p=W.END,A=0;else if(!(A&it.LAST_BOUNDARY)&&y===Ri)f=0,$("onPartBegin"),p=W.HEADER_FIELD_START;else return;break}y!==l[f+2]&&(f=-2),y===l[f+2]&&f++;break;case W.HEADER_FIELD_START:p=W.HEADER_FIELD,x("onHeaderField"),f=0;case W.HEADER_FIELD:if(y===Ei){E("onHeaderField"),p=W.HEADERS_ALMOST_DONE;break}if(f++,y===Tr)break;if(y===wg){if(f===1)return;Y("onHeaderField",!0),p=W.HEADER_VALUE_START;break}if(M=Tg(y),M<Sg||M>vg)return;break;case W.HEADER_VALUE_START:if(y===yg)break;x("onHeaderValue"),p=W.HEADER_VALUE;case W.HEADER_VALUE:y===Ei&&(Y("onHeaderValue",!0),$("onHeaderEnd"),p=W.HEADER_VALUE_ALMOST_DONE);break;case W.HEADER_VALUE_ALMOST_DONE:if(y!==Ri)return;p=W.HEADER_FIELD_START;break;case W.HEADERS_ALMOST_DONE:if(y!==Ri)return;$("onHeadersEnd"),p=W.PART_DATA_START;break;case W.PART_DATA_START:p=W.PART_DATA,x("onPartData");case W.PART_DATA:if(a=f,f===0){for(r+=S;r<b&&!(e[r]in d);)r+=R;r-=S,y=e[r]}if(f<l.length)l[f]===y?(f===0&&Y("onPartData",!0),f++):f=0;else if(f===l.length)f++,y===Ei?A|=it.PART_BOUNDARY:y===Tr?A|=it.LAST_BOUNDARY:f=0;else if(f-1===l.length)if(A&it.PART_BOUNDARY){if(f=0,y===Ri){A&=~it.PART_BOUNDARY,$("onPartEnd"),$("onPartBegin"),p=W.HEADER_FIELD_START;break}}else A&it.LAST_BOUNDARY&&y===Tr?($("onPartEnd"),p=W.END,A=0):f=0;if(f>0)u[f-1]=y;else if(a>0){let D=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);$("onPartData",0,a,D),a=0,x("onPartData"),r--}break;case W.END:break;default:throw new Error(`Unexpected state entered: ${p}`)}Y("onHeaderField"),Y("onHeaderValue"),Y("onPartData"),this.index=f,this.state=p,this.flags=A}end(){if(this.state===W.HEADER_FIELD_START&&this.index===0||this.state===W.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==W.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var ea="1.0",Xg=parseInt(ea.split(".")[1],10);var cs="/api/"+ea,ds="/api/:apiMajor.:apiMinor",ta=cs+"/customer",eb=ds+"/customer",Jd=cs+"/license/status",tb=ds+"/license/status",Zd=cs+"/license/active",rb=ds+"/license/active",ir="/admin",ib=ir+"/download",sb=ir+"/license/:key",nb=ir+"/licenses/active",ob=ir+"/actives",ab=ir+"/populate";function fs(i){ra(i,"string")}function ra(i,e){typeof i!==e&&ia(i,e)}function ps(i){i===null&&ia(i,"object"),ra(i,"object")}function Xd(i,e){let r="Invalid type: ";return i==null?r+=i:r+=`${typeof i} \`${i}\``,r+`, expected ${e}`}function ia(i,e){throw new Error(Xd(i,e))}var pb=new URL("https://replicache-license.herokuapp.com/");async function ms(i,e,r,n,a,u,l){let d=new URL(ta,e),f={name:r,project:n,email:a,commercial:u,acceptedTOS:l};try{let A=await(await i("post",d.toString(),JSON.stringify(f),[["Content-Type","application/json"],["Accept","application/json"]])).text(),R=JSON.parse(A);return tf(R),R.licenseKey}catch(p){throw p instanceof Error?new Error(`Failed to create customer: ${p.message}`):ef(p)?new Error(`Failed to create customer: ${p.toString()}`):new Error("Failed to create customer")}}function ef(i){return typeof i.toString=="function"}function tf(i){ps(i),fs(i.licenseKey)}var gs=new URL("https://replicache-license.herokuapp.com/"),rf=new URL("https://replicache-license-staging.herokuapp.com/");var bc=Ie(Mh(),1);var pc=Ie(require("node:http"),1),mc=Ie(require("node:https"),1),bt=Ie(require("node:zlib"),1),ae=Ie(require("node:stream"),1),Er=require("node:buffer");function lg(i){if(!/^data:/i.test(i))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');i=i.replace(/\r?\n/g,"");let e=i.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=i.substring(5,e).split(";"),n="",a=!1,u=r[0]||"text/plain",l=u;for(let A=1;A<r.length;A++)r[A]==="base64"?a=!0:(l+=`;${r[A]}`,r[A].indexOf("charset=")===0&&(n=r[A].substring(8)));!r[0]&&!n.length&&(l+=";charset=US-ASCII",n="US-ASCII");let d=a?"base64":"ascii",f=unescape(i.substring(e+1)),p=Buffer.from(f,d);return p.type=u,p.typeFull=l,p.charset=n,p}var Lh=lg;var he=Ie(require("node:stream"),1),Ne=require("node:util"),oe=require("node:buffer");gr();vi();var Ue=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends Ue{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var Ti=Symbol.toStringTag,Dn=i=>typeof i=="object"&&typeof i.append=="function"&&typeof i.delete=="function"&&typeof i.get=="function"&&typeof i.getAll=="function"&&typeof i.has=="function"&&typeof i.set=="function"&&typeof i.sort=="function"&&i[Ti]==="URLSearchParams",Sr=i=>i&&typeof i=="object"&&typeof i.arrayBuffer=="function"&&typeof i.type=="string"&&typeof i.stream=="function"&&typeof i.constructor=="function"&&/^(Blob|File)$/.test(i[Ti]),Hh=i=>typeof i=="object"&&(i[Ti]==="AbortSignal"||i[Ti]==="EventTarget"),Vh=(i,e)=>{let r=new URL(e).hostname,n=new URL(i).hostname;return r===n||r.endsWith(`.${n}`)};var xg=(0,Ne.promisify)(he.default.pipeline),te=Symbol("Body internals"),Ce=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Dn(e)?e=oe.Buffer.from(e.toString()):Sr(e)||oe.Buffer.isBuffer(e)||(Ne.types.isAnyArrayBuffer(e)?e=oe.Buffer.from(e):ArrayBuffer.isView(e)?e=oe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof he.default||(e instanceof ft?(e=zh(e),n=e.type.split("=")[1]):e=oe.Buffer.from(String(e))));let a=e;oe.Buffer.isBuffer(e)?a=he.default.Readable.from(e):Sr(e)&&(a=he.default.Readable.from(e.stream())),this[te]={body:e,stream:a,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof he.default&&e.on("error",u=>{let l=u instanceof Ue?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[te].error=l})}get body(){return this[te].stream}get bodyUsed(){return this[te].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await xi(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new ft,a=new URLSearchParams(await this.text());for(let[u,l]of a)n.append(u,l);return n}let{toFormData:r}=await Promise.resolve().then(()=>(Xh(),Zh));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[te].body&&this[te].body.type||"",r=await this.arrayBuffer();return new je([r],{type:e})}async json(){let e=await xi(this);return JSON.parse(e.toString())}async text(){return(await xi(this)).toString()}buffer(){return xi(this)}};Ce.prototype.buffer=(0,Ne.deprecate)(Ce.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Ce.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ne.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function xi(i){if(i[te].disturbed)throw new TypeError(`body used already for: ${i.url}`);if(i[te].disturbed=!0,i[te].error)throw i[te].error;let{body:e}=i;if(e===null)return oe.Buffer.alloc(0);if(!(e instanceof he.default))return oe.Buffer.alloc(0);let r=[],n=0;try{for await(let a of e){if(i.size>0&&n+a.length>i.size){let u=new ee(`content size at ${i.url} over limit: ${i.size}`,"max-size");throw e.destroy(u),u}n+=a.length,r.push(a)}}catch(a){throw a instanceof Ue?a:new ee(`Invalid response body while trying to fetch ${i.url}: ${a.message}`,"system",a)}if(e.readableEnded===!0||e.$e.ended===!0)try{return r.every(a=>typeof a=="string")?oe.Buffer.from(r.join("")):oe.Buffer.concat(r,n)}catch(a){throw new ee(`Could not create Buffer from response body for ${i.url}: ${a.message}`,"system",a)}else throw new ee(`Premature close of server response while trying to fetch ${i.url}`)}var Ft=(i,e)=>{let r,n,{body:a}=i[te];if(i.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof he.default&&typeof a.getBoundary!="function"&&(r=new he.PassThrough({highWaterMark:e}),n=new he.PassThrough({highWaterMark:e}),a.pipe(r),a.pipe(n),i[te].stream=r,a=n),a},Cg=(0,Ne.deprecate)(i=>i.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Ci=(i,e)=>i===null?null:typeof i=="string"?"text/plain;charset=UTF-8":Dn(i)?"application/x-www-form-urlencoded;charset=UTF-8":Sr(i)?i.type||null:oe.Buffer.isBuffer(i)||Ne.types.isAnyArrayBuffer(i)||ArrayBuffer.isView(i)?null:i instanceof ft?`multipart/form-data; boundary=${e[te].boundary}`:i&&typeof i.getBoundary=="function"?`multipart/form-data;boundary=${Cg(i)}`:i instanceof he.default?null:"text/plain;charset=UTF-8",ec=i=>{let{body:e}=i[te];return e===null?0:Sr(e)?e.size:oe.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},tc=async(i,{body:e})=>{e===null?i.end():await xg(e,i)};var Ln=require("node:util"),Rr=Ie(require("node:http"),1),Ai=typeof Rr.default.validateHeaderName=="function"?Rr.default.validateHeaderName:i=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(i)){let e=new TypeError(`Header name must be a valid HTTP token [${i}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},$n=typeof Rr.default.validateHeaderValue=="function"?Rr.default.validateHeaderValue:(i,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${i}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},re=class extends URLSearchParams{constructor(e){let r=[];if(e instanceof re){let n=e.raw();for(let[a,u]of Object.entries(n))r.push(...u.map(l=>[a,l]))}else if(e!=null)if(typeof e=="object"&&!Ln.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(a=>{if(typeof a!="object"||Ln.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,a])=>(Ai(n),$n(n,String(a)),[String(n).toLowerCase(),String(a)])):void 0,super(r),new Proxy(this,{get(n,a,u){switch(a){case"append":case"set":return(l,d)=>(Ai(l),$n(l,String(d)),URLSearchParams.prototype[a].call(n,String(l).toLowerCase(),String(d)));case"delete":case"has":case"getAll":return l=>(Ai(l),URLSearchParams.prototype[a].call(n,String(l).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,a,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(re.prototype,["get","entries","forEach","values"].reduce((i,e)=>(i[e]={enumerable:!0},i),{}));function rc(i=[]){return new re(i.reduce((e,r,n,a)=>(n%2===0&&e.push(a.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return Ai(e),$n(e,String(r)),!0}catch(n){return!1}}))}var Ag=new Set([301,302,303,307,308]),Pi=i=>Ag.has(i);var be=Symbol("Response internals"),G=class extends Ce{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,a=new re(r.headers);if(e!==null&&!a.has("Content-Type")){let u=Ci(e,this);u&&a.append("Content-Type",u)}this[be]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:a,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[be].type}get url(){return this[be].url||""}get status(){return this[be].status}get ok(){return this[be].status>=200&&this[be].status<300}get redirected(){return this[be].counter>0}get statusText(){return this[be].statusText}get headers(){return this[be].headers}get highWaterMark(){return this[be].highWaterMark}clone(){return new G(Ft(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!Pi(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new G(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new G(null,{status:0,statusText:""});return e[be].type="error",e}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(G.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var cc=require("node:url"),dc=require("node:util");var ic=i=>{if(i.search)return i.search;let e=i.href.length-1,r=i.hash||(i.href[e]==="#"?"#":"");return i.href[e-r.length]==="?"?"?":""};var nc=require("node:net");function sc(i,e=!1){return i==null||(i=new URL(i),/^(about|blob|data):$/.test(i.protocol))?"no-referrer":(i.username="",i.password="",i.hash="",e&&(i.pathname="",i.search=""),i)}var oc=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ac="strict-origin-when-cross-origin";function uc(i){if(!oc.has(i))throw new TypeError(`Invalid referrerPolicy: ${i}`);return i}function Pg(i){if(/^(http|ws)s:$/.test(i.protocol))return!0;let e=i.host.replace(/(^\[)|(]$)/g,""),r=(0,nc.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:/^(.+\.)*localhost$/.test(i.host)?!1:i.protocol==="file:"}function Wt(i){return/^about:(blank|srcdoc)$/.test(i)||i.protocol==="data:"||/^(blob|filesystem):$/.test(i.protocol)?!0:Pg(i)}function lc(i,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(i.referrer==="no-referrer"||i.referrerPolicy==="")return null;let n=i.referrerPolicy;if(i.referrer==="about:client")return"no-referrer";let a=i.referrer,u=sc(a),l=sc(a,!0);u.toString().length>4096&&(u=l),e&&(u=e(u)),r&&(l=r(l));let d=new URL(i.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return u;case"strict-origin":return Wt(u)&&!Wt(d)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return u.origin===d.origin?u:Wt(u)&&!Wt(d)?"no-referrer":l;case"same-origin":return u.origin===d.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===d.origin?u:l;case"no-referrer-when-downgrade":return Wt(u)&&!Wt(d)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function hc(i){let e=(i.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&oc.has(n)&&(r=n);return r}var V=Symbol("Request internals"),Oi=i=>typeof i=="object"&&typeof i[V]=="object",Og=(0,dc.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ze=class extends Ce{constructor(e,r={}){let n;if(Oi(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentails.`);let a=r.method||e.method||"GET";if(a=a.toUpperCase(),"data"in r&&Og(),(r.body!=null||Oi(e)&&e.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=r.body?r.body:Oi(e)&&e.body!==null?Ft(e):null;super(u,{size:r.size||e.size||0});let l=new re(r.headers||e.headers||{});if(u!==null&&!l.has("Content-Type")){let p=Ci(u,this);p&&l.set("Content-Type",p)}let d=Oi(e)?e.signal:null;if("signal"in r&&(d=r.signal),d!=null&&!Hh(d))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let f=r.referrer==null?e.referrer:r.referrer;if(f==="")f="no-referrer";else if(f){let p=new URL(f);f=/^about:(\/\/)?client$/.test(p)?"client":p}else f=void 0;this[V]={method:a,redirect:r.redirect||e.redirect||"follow",headers:l,parsedURL:n,signal:d,referrer:f},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[V].method}get url(){return(0,cc.format)(this[V].parsedURL)}get headers(){return this[V].headers}get redirect(){return this[V].redirect}get signal(){return this[V].signal}get referrer(){if(this[V].referrer==="no-referrer")return"";if(this[V].referrer==="client")return"about:client";if(this[V].referrer)return this[V].referrer.toString()}get referrerPolicy(){return this[V].referrerPolicy}set referrerPolicy(e){this[V].referrerPolicy=uc(e)}clone(){return new ze(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ze.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var fc=i=>{let{parsedURL:e}=i[V],r=new re(i[V].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(i.body===null&&/^(post|put)$/i.test(i.method)&&(n="0"),i.body!==null){let d=ec(i);typeof d=="number"&&!Number.isNaN(d)&&(n=String(d))}n&&r.set("Content-Length",n),i.referrerPolicy===""&&(i.referrerPolicy=ac),i.referrer&&i.referrer!=="no-referrer"?i[V].referrer=lc(i):i[V].referrer="no-referrer",i[V].referrer instanceof URL&&r.set("Referer",i.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),i.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:a}=i;typeof a=="function"&&(a=a(e)),!r.has("Connection")&&!a&&r.set("Connection","close");let u=ic(e),l={path:e.pathname+u,method:i.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:i.insecureHTTPParser,agent:a};return{parsedURL:e,options:l}};var Di=class extends Ue{constructor(e,r="aborted"){super(e,r)}};vi();In();var Dg=new Set(["data:","http:","https:"]);async function qi(i,e){return new Promise((r,n)=>{let a=new ze(i,e),{parsedURL:u,options:l}=fc(a);if(!Dg.has(u.protocol))throw new TypeError(`node-fetch cannot load ${i}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=Lh(a.url),M=new G(y,{headers:{"Content-Type":y.typeFull}});r(M);return}let d=(u.protocol==="https:"?mc.default:pc.default).request,{signal:f}=a,p=null,A=()=>{let y=new Di("The operation was aborted.");n(y),a.body&&a.body instanceof ae.default.Readable&&a.body.destroy(y),!(!p||!p.body)&&p.body.emit("error",y)};if(f&&f.aborted){A();return}let R=()=>{A(),b()},S=d(u.toString(),l);f&&f.addEventListener("abort",R);let b=()=>{S.abort(),f&&f.removeEventListener("abort",R)};S.on("error",y=>{n(new ee(`request to ${a.url} failed, reason: ${y.message}`,"system",y)),b()}),qg(S,y=>{p.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let M;y.prependListener("end",()=>{M=y.Le}),y.prependListener("close",x=>{if(p&&M<y.Le&&!x){let E=new Error("Premature close");E.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",E)}})}),S.on("response",y=>{S.setTimeout(0);let M=rc(y.rawHeaders);if(Pi(y.statusCode)){let D=M.get("Location"),z=null;try{z=D===null?null:new URL(D,a.url)}catch(L){if(a.redirect!=="manual"){n(new ee(`uri requested responds with an invalid redirect URL: ${D}`,"invalid-redirect")),b();return}}switch(a.redirect){case"error":n(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),b();return;case"manual":break;case"follow":{if(z===null)break;if(a.counter>=a.follow){n(new ee(`maximum redirect reached at: ${a.url}`,"max-redirect")),b();return}let L={headers:new re(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:Ft(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!Vh(a.url,z))for(let ie of["authorization","www-authenticate","cookie","cookie2"])L.headers.delete(ie);if(y.statusCode!==303&&a.body&&e.body instanceof ae.default.Readable){n(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),b();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&a.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length"));let He=hc(M);He&&(L.referrerPolicy=He),r(qi(new ze(z,L))),b();return}default:return n(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}f&&y.once("end",()=>{f.removeEventListener("abort",R)});let x=(0,ae.pipeline)(y,new ae.PassThrough,D=>{D&&n(D)});process.version<"v12.10"&&y.on("aborted",R);let E={url:a.url,status:y.statusCode,statusText:y.statusMessage,headers:M,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},$=M.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||$===null||y.statusCode===204||y.statusCode===304){p=new G(x,E),r(p);return}let Y={flush:bt.default.Z_SYNC_FLUSH,finishFlush:bt.default.Z_SYNC_FLUSH};if($==="gzip"||$==="x-gzip"){x=(0,ae.pipeline)(x,bt.default.createGunzip(Y),D=>{D&&n(D)}),p=new G(x,E),r(p);return}if($==="deflate"||$==="x-deflate"){let D=(0,ae.pipeline)(y,new ae.PassThrough,z=>{z&&n(z)});D.once("data",z=>{(z[0]&15)===8?x=(0,ae.pipeline)(x,bt.default.createInflate(),L=>{L&&n(L)}):x=(0,ae.pipeline)(x,bt.default.createInflateRaw(),L=>{L&&n(L)}),p=new G(x,E),r(p)}),D.once("end",()=>{p||(p=new G(x,E),r(p))});return}if($==="br"){x=(0,ae.pipeline)(x,bt.default.createBrotliDecompress(),D=>{D&&n(D)}),p=new G(x,E),r(p);return}p=new G(x,E),r(p)}),tc(S,a).catch(n)})}function qg(i,e){let r=Er.Buffer.from(`0\r
\r
`),n=!1,a=!1,u;i.on("response",l=>{let{headers:d}=l;n=d["transfer-encoding"]==="chunked"&&!d["content-length"]}),i.on("socket",l=>{let d=()=>{if(n&&!a){let f=new Error("Premature close");f.code="ERR_STREAM_PREMATURE_CLOSE",e(f)}};l.prependListener("close",d),i.on("abort",()=>{l.removeListener("close",d)}),l.on("data",f=>{a=Er.Buffer.compare(f.slice(-5),r)===0,!a&&u&&(a=Er.Buffer.compare(u.slice(-3),r.slice(0,3))===0&&Er.Buffer.compare(f.slice(-2),r.slice(3))===0),u=f})})}async function Ig(i,e,r,n){return qi(e,{method:i,body:r,headers:n})}async function gc(i,e,r,n){let a=await Ig(i,e,r,n);if(!a.ok)throw new Error(`Got ${a.status} fetching ${e}: ${await a.text()}`);return a}var yc="https://roci.dev/terms.html",Mg=yc+"#software-licenses",Lg="hello@replicache.dev",$g="discord.replicache.dev",kg=`Welcome. Using Replicache requires registering to acquire a license key.
`,Bg="Your name:",_g="Company/project/org name or URL:",Fg="Contact email:",Wg=`Is your project commercial as defined by the Replicache Terms of Service (${Mg})?`,jg=`Do you agree to the Replicache Terms of Service (${yc})?`,Ug="Sorry, you must agree to the Replicache Terms of Service to use Replicache.",Ng="Fetching License Key...",zg=`Use Replicache like so:

new Replicache({
	licenseKey: "<licensekey>",
	...
});

In unit tests you can pass Replicache.TEST_LICENSE_KEY, which disables license checks for a few minutes.

Questions? ${Lg} or ${$g}.
`,Hg="https://github.com/rocicorp/replicache/issues/new",Vg=`Sorry, there was an error. Please file a bug at ${Hg} with the following information:
`;async function kn(i){await Yg(i,ms)}async function Yg(i,e,r=process.stdout){function n(a){r.write(a+`
`)}try{let a=[{type:"text",name:"name",message:Bg,validate:l=>Gg(l)?!0:"Name is required"},{type:"text",name:"project",message:_g},{type:"text",name:"email",message:Fg,validate:l=>Qg(l)?!0:"Email is required"},{type:"confirm",name:"commercial",message:Wg,initial:!0},{type:"confirm",name:"acceptedTOS",message:jg,initial:!1}];a=a.map(l=>({...l,stdout:r})),n(kg);let u=await(0,bc.default)(a,{onCancel:()=>process.exit(1)});if(u.acceptedTOS){n(Ng);let l=await e(gc,i,u.name,u.project===""?void 0:u.project,u.email,u.commercial,u.acceptedTOS);n(`All set! Your License Key:

	 ${l}
`),n(zg)}else n(Ug)}catch(a){n(Vg+a),process.exit(1)}process.exit(0)}function Gg(i){return/\S+/.test(i)}function Qg(i){return/^[^@]+@[^@]+\.[^@]+$/.test(i)}(process.argv.length<3||process.argv[2]!=="get-license")&&(console.error("Usage: npx replicache get-license"),process.exit(1));kn(gs);
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
